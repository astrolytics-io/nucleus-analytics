!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("fs"),require("path"),require("crypto"),require("assert"),require("events"),require("util"),require("os"),require("https"),require("http"),require("net"),require("tls"),require("url"),require("zlib"),require("stream")):"function"==typeof define&&define.amd?define(["fs","path","crypto","assert","events","util","os","https","http","net","tls","url","zlib","stream"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Nucleus=t(e.require$$0,e.require$$0$1,e.require$$2$1,e.require$$3,e.require$$0$2,e.require$$2,e.require$$1,e.require$$1$1,e.require$$2$2,e.require$$3$1,e.require$$4$1,e.require$$6,e.require$$0$3,e.require$$0$4)}(this,(function(e,t,r,n,s,o,i,a,c,l,u,f,h,d){"use strict";function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m,y,v,g,E=p(e),_=p(t),w=p(r),$=p(n),b=p(s),S=p(o),N=p(i),O=p(a),I=p(c),R=p(l),P=p(u),T=p(f),A=p(h),k=p(d),x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C={exports:{}};function L(){return y||(y=1,m=e=>{const t=typeof e;return null!==e&&("object"===t||"function"===t)}),m}function j(){if(g)return v;g=1;const e=L(),t=new Set(["__proto__","prototype","constructor"]);function r(e){const r=e.split("."),n=[];for(let e=0;e<r.length;e++){let t=r[e];for(;"\\"===t[t.length-1]&&void 0!==r[e+1];)t=t.slice(0,-1)+".",t+=r[++e];n.push(t)}return n.some((e=>t.has(e)))?[]:n}return v={get(t,n,s){if(!e(t)||"string"!=typeof n)return void 0===s?t:s;const o=r(n);if(0!==o.length){for(let e=0;e<o.length;e++)if(null==(t=t[o[e]])){if(e!==o.length-1)return s;break}return void 0===t?s:t}},set(t,n,s){if(!e(t)||"string"!=typeof n)return t;const o=t,i=r(n);for(let r=0;r<i.length;r++){const n=i[r];e(t[n])||(t[n]={}),r===i.length-1&&(t[n]=s),t=t[n]}return o},delete(t,n){if(!e(t)||"string"!=typeof n)return!1;const s=r(n);for(let r=0;r<s.length;r++){const n=s[r];if(r===s.length-1)return delete t[n],!0;if(t=t[n],!e(t))return!1}},has(t,n){if(!e(t)||"string"!=typeof n)return!1;const s=r(n);if(0===s.length)return!1;for(let r=0;r<s.length;r++){if(!e(t))return!1;if(!(s[r]in t))return!1;t=t[s[r]]}return!0}}}var D,M,F={exports:{}},U={exports:{}};function V(){return D||(D=1,function(e,t){var r;t=e.exports=f,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,s=t.re=[],o=t.src=[],i=t.tokens={},a=0;function c(e){i[e]=a++}c("NUMERICIDENTIFIER"),o[i.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),o[i.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),o[i.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),o[i.MAINVERSION]="("+o[i.NUMERICIDENTIFIER]+")\\.("+o[i.NUMERICIDENTIFIER]+")\\.("+o[i.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),o[i.MAINVERSIONLOOSE]="("+o[i.NUMERICIDENTIFIERLOOSE]+")\\.("+o[i.NUMERICIDENTIFIERLOOSE]+")\\.("+o[i.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),o[i.PRERELEASEIDENTIFIER]="(?:"+o[i.NUMERICIDENTIFIER]+"|"+o[i.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),o[i.PRERELEASEIDENTIFIERLOOSE]="(?:"+o[i.NUMERICIDENTIFIERLOOSE]+"|"+o[i.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),o[i.PRERELEASE]="(?:-("+o[i.PRERELEASEIDENTIFIER]+"(?:\\."+o[i.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),o[i.PRERELEASELOOSE]="(?:-?("+o[i.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+o[i.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),o[i.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),o[i.BUILD]="(?:\\+("+o[i.BUILDIDENTIFIER]+"(?:\\."+o[i.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),o[i.FULLPLAIN]="v?"+o[i.MAINVERSION]+o[i.PRERELEASE]+"?"+o[i.BUILD]+"?",o[i.FULL]="^"+o[i.FULLPLAIN]+"$",c("LOOSEPLAIN"),o[i.LOOSEPLAIN]="[v=\\s]*"+o[i.MAINVERSIONLOOSE]+o[i.PRERELEASELOOSE]+"?"+o[i.BUILD]+"?",c("LOOSE"),o[i.LOOSE]="^"+o[i.LOOSEPLAIN]+"$",c("GTLT"),o[i.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),o[i.XRANGEIDENTIFIERLOOSE]=o[i.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),o[i.XRANGEIDENTIFIER]=o[i.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),o[i.XRANGEPLAIN]="[v=\\s]*("+o[i.XRANGEIDENTIFIER]+")(?:\\.("+o[i.XRANGEIDENTIFIER]+")(?:\\.("+o[i.XRANGEIDENTIFIER]+")(?:"+o[i.PRERELEASE]+")?"+o[i.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),o[i.XRANGEPLAINLOOSE]="[v=\\s]*("+o[i.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[i.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[i.XRANGEIDENTIFIERLOOSE]+")(?:"+o[i.PRERELEASELOOSE]+")?"+o[i.BUILD]+"?)?)?",c("XRANGE"),o[i.XRANGE]="^"+o[i.GTLT]+"\\s*"+o[i.XRANGEPLAIN]+"$",c("XRANGELOOSE"),o[i.XRANGELOOSE]="^"+o[i.GTLT]+"\\s*"+o[i.XRANGEPLAINLOOSE]+"$",c("COERCE"),o[i.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),s[i.COERCERTL]=new RegExp(o[i.COERCE],"g"),c("LONETILDE"),o[i.LONETILDE]="(?:~>?)",c("TILDETRIM"),o[i.TILDETRIM]="(\\s*)"+o[i.LONETILDE]+"\\s+",s[i.TILDETRIM]=new RegExp(o[i.TILDETRIM],"g");c("TILDE"),o[i.TILDE]="^"+o[i.LONETILDE]+o[i.XRANGEPLAIN]+"$",c("TILDELOOSE"),o[i.TILDELOOSE]="^"+o[i.LONETILDE]+o[i.XRANGEPLAINLOOSE]+"$",c("LONECARET"),o[i.LONECARET]="(?:\\^)",c("CARETTRIM"),o[i.CARETTRIM]="(\\s*)"+o[i.LONECARET]+"\\s+",s[i.CARETTRIM]=new RegExp(o[i.CARETTRIM],"g");c("CARET"),o[i.CARET]="^"+o[i.LONECARET]+o[i.XRANGEPLAIN]+"$",c("CARETLOOSE"),o[i.CARETLOOSE]="^"+o[i.LONECARET]+o[i.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),o[i.COMPARATORLOOSE]="^"+o[i.GTLT]+"\\s*("+o[i.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),o[i.COMPARATOR]="^"+o[i.GTLT]+"\\s*("+o[i.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),o[i.COMPARATORTRIM]="(\\s*)"+o[i.GTLT]+"\\s*("+o[i.LOOSEPLAIN]+"|"+o[i.XRANGEPLAIN]+")",s[i.COMPARATORTRIM]=new RegExp(o[i.COMPARATORTRIM],"g");c("HYPHENRANGE"),o[i.HYPHENRANGE]="^\\s*("+o[i.XRANGEPLAIN]+")\\s+-\\s+("+o[i.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),o[i.HYPHENRANGELOOSE]="^\\s*("+o[i.XRANGEPLAINLOOSE]+")\\s+-\\s+("+o[i.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),o[i.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<a;l++)r(l,o[l]),s[l]||(s[l]=new RegExp(o[l]));function u(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof f)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?s[i.LOOSE]:s[i.FULL]).test(e))return null;try{return new f(e,t)}catch(e){return null}}function f(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof f){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof f))return new f(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?s[i.LOOSE]:s[i.FULL]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=u,t.valid=function(e,t){var r=u(e,t);return r?r.version:null},t.clean=function(e,t){var r=u(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=f,f.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},f.prototype.toString=function(){return this.version},f.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof f||(e=new f(e,this.options)),this.compareMain(e)||this.comparePre(e)},f.prototype.compareMain=function(e){return e instanceof f||(e=new f(e,this.options)),d(this.major,e.major)||d(this.minor,e.minor)||d(this.patch,e.patch)},f.prototype.comparePre=function(e){if(e instanceof f||(e=new f(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],s=e.prerelease[t];if(r("prerelease compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return d(n,s)}while(++t)},f.prototype.compareBuild=function(e){e instanceof f||(e=new f(e,this.options));var t=0;do{var n=this.build[t],s=e.build[t];if(r("prerelease compare",t,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return d(n,s)}while(++t)},f.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new f(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(v(e,t))return null;var r=u(e),n=u(t),s="";if(r.prerelease.length||n.prerelease.length){s="pre";var o="prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==n[i])return s+i;return o},t.compareIdentifiers=d;var h=/^[0-9]+$/;function d(e,t){var r=h.test(e),n=h.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function p(e,t,r){return new f(e,r).compare(new f(t,r))}function m(e,t,r){return p(e,t,r)>0}function y(e,t,r){return p(e,t,r)<0}function v(e,t,r){return 0===p(e,t,r)}function g(e,t,r){return 0!==p(e,t,r)}function E(e,t,r){return p(e,t,r)>=0}function _(e,t,r){return p(e,t,r)<=0}function w(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return v(e,r,n);case"!=":return g(e,r,n);case">":return m(e,r,n);case">=":return E(e,r,n);case"<":return y(e,r,n);case"<=":return _(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof $))return new $(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===b?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return d(t,e)},t.major=function(e,t){return new f(e,t).major},t.minor=function(e,t){return new f(e,t).minor},t.patch=function(e,t){return new f(e,t).patch},t.compare=p,t.compareLoose=function(e,t){return p(e,t,!0)},t.compareBuild=function(e,t,r){var n=new f(e,r),s=new f(t,r);return n.compare(s)||n.compareBuild(s)},t.rcompare=function(e,t,r){return p(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compareBuild(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.compareBuild(n,e,r)}))},t.gt=m,t.lt=y,t.eq=v,t.neq=g,t.gte=E,t.lte=_,t.cmp=w,t.Comparator=$;var b={};function S(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof S)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new S(e.raw,t);if(e instanceof $)return new S(e.value,t);if(!(this instanceof S))return new S(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function N(e,t){for(var r=!0,n=e.slice(),s=n.pop();r&&n.length;)r=n.every((function(e){return s.intersects(e,t)})),s=n.pop();return r}function O(e){return!e||"x"===e.toLowerCase()||"*"===e}function I(e,t,r,n,s,o,i,a,c,l,u,f,h){return((t=O(r)?"":O(n)?">="+r+".0.0":O(s)?">="+r+"."+n+".0":">="+t)+" "+(a=O(c)?"":O(l)?"<"+(+c+1)+".0.0":O(u)?"<"+c+"."+(+l+1)+".0":f?"<="+c+"."+l+"."+u+"-"+f:"<="+a)).trim()}function R(e,t,n){for(var s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(s=0;s<e.length;s++)if(r(e[s].semver),e[s].semver!==b&&e[s].semver.prerelease.length>0){var o=e[s].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function P(e,t,r){try{t=new S(t,r)}catch(e){return!1}return t.test(e)}function T(e,t,r,n){var s,o,i,a,c;switch(e=new f(e,n),t=new S(t,n),r){case">":s=m,o=_,i=y,a=">",c=">=";break;case"<":s=y,o=E,i=m,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(P(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],h=null,d=null;if(u.forEach((function(e){e.semver===b&&(e=new $(">=0.0.0")),h=h||e,d=d||e,s(e.semver,h.semver,n)?h=e:i(e.semver,d.semver,n)&&(d=e)})),h.operator===a||h.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&i(e,d.semver))return!1}return!0}$.prototype.parse=function(e){var t=this.options.loose?s[i.COMPARATORLOOSE]:s[i.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new f(r[2],this.options.loose):this.semver=b},$.prototype.toString=function(){return this.value},$.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===b||e===b)return!0;if("string"==typeof e)try{e=new f(e,this.options)}catch(e){return!1}return w(e,this.operator,this.semver,this.options)},$.prototype.intersects=function(e,t){if(!(e instanceof $))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new S(e.value,t),P(this.value,r,t));if(""===e.operator)return""===e.value||(r=new S(this.value,t),P(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,i=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=w(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=w(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||s||o&&i||a||c},t.Range=S,S.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},S.prototype.toString=function(){return this.range},S.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?s[i.HYPHENRANGELOOSE]:s[i.HYPHENRANGE];e=e.replace(n,I),r("hyphen replace",e),e=e.replace(s[i.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,s[i.COMPARATORTRIM]),e=(e=(e=e.replace(s[i.TILDETRIM],"$1~")).replace(s[i.CARETTRIM],"$1^")).split(/\s+/).join(" ");var o=t?s[i.COMPARATORLOOSE]:s[i.COMPARATOR],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?s[i.CARETLOOSE]:s[i.CARET];return e.replace(n,(function(t,n,s,o,i){var a;return r("caret",e,t,n,s,o,i),O(n)?a="":O(s)?a=">="+n+".0.0 <"+(+n+1)+".0.0":O(o)?a="0"===n?">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":">="+n+"."+s+".0 <"+(+n+1)+".0.0":i?(r("replaceCaret pr",i),a="0"===n?"0"===s?">="+n+"."+s+"."+o+"-"+i+" <"+n+"."+s+"."+(+o+1):">="+n+"."+s+"."+o+"-"+i+" <"+n+"."+(+s+1)+".0":">="+n+"."+s+"."+o+"-"+i+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===s?">="+n+"."+s+"."+o+" <"+n+"."+s+"."+(+o+1):">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0":">="+n+"."+s+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?s[i.TILDELOOSE]:s[i.TILDE];return e.replace(n,(function(t,n,s,o,i){var a;return r("tilde",e,t,n,s,o,i),O(n)?a="":O(s)?a=">="+n+".0.0 <"+(+n+1)+".0.0":O(o)?a=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":i?(r("replaceTilde pr",i),a=">="+n+"."+s+"."+o+"-"+i+" <"+n+"."+(+s+1)+".0"):a=">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?s[i.XRANGELOOSE]:s[i.XRANGE];return e.replace(n,(function(n,s,o,i,a,c){r("xRange",e,n,s,o,i,a,c);var l=O(o),u=l||O(i),f=u||O(a),h=f;return"="===s&&h&&(s=""),c=t.includePrerelease?"-0":"",l?n=">"===s||"<"===s?"<0.0.0-0":"*":s&&h?(u&&(i=0),a=0,">"===s?(s=">=",u?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===s&&(s="<",u?o=+o+1:i=+i+1),n=s+o+"."+i+"."+a+c):u?n=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:f&&(n=">="+o+"."+i+".0"+c+" <"+o+"."+(+i+1)+".0"+c),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(s[i.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new $(e,this.options)}),this)},S.prototype.intersects=function(e,t){if(!(e instanceof S))throw new TypeError("a Range is required");return this.set.some((function(r){return N(r,t)&&e.set.some((function(e){return N(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new S(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},S.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new f(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1},t.satisfies=P,t.maxSatisfying=function(e,t,r){var n=null,s=null;try{var o=new S(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==s.compare(e)||(s=new f(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,s=null;try{var o=new S(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==s.compare(e)||(s=new f(n=e,r)))})),n},t.minVersion=function(e,t){e=new S(e,t);var r=new f("0.0.0");if(e.test(r))return r;if(r=new f("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new f(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!m(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new S(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return T(e,t,"<",r)},t.gtr=function(e,t,r){return T(e,t,">",r)},t.outside=T,t.prerelease=function(e,t){var r=u(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new S(e,r),t=new S(t,r),e.intersects(t)},t.coerce=function(e,t){if(e instanceof f)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=s[i.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),s[i.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;s[i.COERCERTL].lastIndex=-1}else r=e.match(s[i.COERCE]);if(null===r)return null;return u(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}}(U,U.exports)),U.exports}function G(){if(M)return F.exports;M=1;const e=E.default,t=_.default,{promisify:r}=S.default,n=V().satisfies(process.version,">=10.12.0"),s=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(t.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},o=t=>({...{mode:511,fs:e},...t}),i=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};return F.exports=async(a,c)=>{s(a),c=o(c);const l=r(c.fs.mkdir),u=r(c.fs.stat);if(n&&c.fs.mkdir===e.mkdir){const e=t.resolve(a);return await l(e,{mode:c.mode,recursive:!0}),e}const f=async e=>{try{return await l(e,c.mode),e}catch(r){if("EPERM"===r.code)throw r;if("ENOENT"===r.code){if(t.dirname(e)===e)throw i(e);if(r.message.includes("null bytes"))throw r;return await f(t.dirname(e)),f(e)}try{if(!(await u(e)).isDirectory())throw new Error("The path is not a directory")}catch(e){throw r}return e}};return f(t.resolve(a))},F.exports.sync=(r,a)=>{if(s(r),a=o(a),n&&a.fs.mkdirSync===e.mkdirSync){const n=t.resolve(r);return e.mkdirSync(n,{mode:a.mode,recursive:!0}),n}const c=e=>{try{a.fs.mkdirSync(e,a.mode)}catch(r){if("EPERM"===r.code)throw r;if("ENOENT"===r.code){if(t.dirname(e)===e)throw i(e);if(r.message.includes("null bytes"))throw r;return c(t.dirname(e)),c(e)}try{if(!a.fs.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch(e){throw r}}return e};return c(t.resolve(r))},F.exports}var z,q={exports:{}},B={exports:{}},H={exports:{}},W={exports:{}};function X(){if(z)return W.exports;z=1;const e=E.default;return W.exports=t=>new Promise((r=>{e.access(t,(e=>{r(!e)}))})),W.exports.sync=t=>{try{return e.accessSync(t),!0}catch(e){return!1}},W.exports}var K,Y,J,Z,Q,ee,te,re={exports:{}},ne={exports:{}};function se(){if(K)return ne.exports;K=1;const e=(e,...t)=>new Promise((r=>{r(e(...t))}));return ne.exports=e,ne.exports.default=e,ne.exports}function oe(){if(Y)return re.exports;Y=1;const e=se(),t=t=>{if(!Number.isInteger(t)&&t!==1/0||!(t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const r=[];let n=0;const s=()=>{n--,r.length>0&&r.shift()()},o=(t,r,...o)=>{n++;const i=e(t,...o);r(i),i.then(s,s)},i=(e,...s)=>new Promise((i=>((e,s,...i)=>{n<t?o(e,s,...i):r.push(o.bind(null,e,s,...i))})(e,i,...s)));return Object.defineProperties(i,{activeCount:{get:()=>n},pendingCount:{get:()=>r.length},clearQueue:{value:()=>{r.length=0}}}),i};return re.exports=t,re.exports.default=t,re.exports}function ie(){if(Z)return J;Z=1;const e=oe();class t extends Error{constructor(e){super(),this.value=e}}const r=(e,t)=>Promise.resolve(e).then(t),n=e=>Promise.all(e).then((e=>!0===e[1]&&Promise.reject(new t(e[0]))));return J=(s,o,i)=>{i=Object.assign({concurrency:1/0,preserveOrder:!0},i);const a=e(i.concurrency),c=[...s].map((e=>[e,a(r,e,o)])),l=e(i.preserveOrder?1:1/0);return Promise.all(c.map((e=>l(n,e)))).then((()=>{})).catch((e=>e instanceof t?e.value:Promise.reject(e)))},J}function ae(){if(Q)return H.exports;Q=1;const e=_.default,t=X(),r=ie();return H.exports=(n,s)=>(s=Object.assign({cwd:process.cwd()},s),r(n,(r=>t(e.resolve(s.cwd,r))),s)),H.exports.sync=(r,n)=>{n=Object.assign({cwd:process.cwd()},n);for(const s of r)if(t.sync(e.resolve(n.cwd,s)))return s},H.exports}function ce(){if(ee)return B.exports;ee=1;const e=_.default,t=ae();return B.exports=(r,n={})=>{const s=e.resolve(n.cwd||""),{root:o}=e.parse(s),i=[].concat(r);return new Promise((r=>{!function n(s){t(i,{cwd:s}).then((t=>{t?r(e.join(s,t)):s===o?r(null):n(e.dirname(s))}))}(s)}))},B.exports.sync=(r,n={})=>{let s=e.resolve(n.cwd||"");const{root:o}=e.parse(s),i=[].concat(r);for(;;){const r=t.sync(i,{cwd:s});if(r)return e.join(s,r);if(s===o)return null;s=e.dirname(s)}},B.exports}function le(){if(te)return q.exports;te=1;const e=ce();return q.exports=async({cwd:t}={})=>e("package.json",{cwd:t}),q.exports.sync=({cwd:t}={})=>e.sync("package.json",{cwd:t}),q.exports}var ue,fe={exports:{}};function he(){if(ue)return fe.exports;ue=1;const e=_.default,t=N.default,r=t.homedir(),n=t.tmpdir(),{env:s}=process,o=(t,o)=>{if("string"!=typeof t)throw new TypeError("Expected string, got "+typeof t);return(o=Object.assign({suffix:"nodejs"},o)).suffix&&(t+=`-${o.suffix}`),"darwin"===process.platform?(t=>{const s=e.join(r,"Library");return{data:e.join(s,"Application Support",t),config:e.join(s,"Preferences",t),cache:e.join(s,"Caches",t),log:e.join(s,"Logs",t),temp:e.join(n,t)}})(t):"win32"===process.platform?(t=>{const o=s.APPDATA||e.join(r,"AppData","Roaming"),i=s.LOCALAPPDATA||e.join(r,"AppData","Local");return{data:e.join(i,t,"Data"),config:e.join(o,t,"Config"),cache:e.join(i,t,"Cache"),log:e.join(i,t,"Log"),temp:e.join(n,t)}})(t):(t=>{const o=e.basename(r);return{data:e.join(s.XDG_DATA_HOME||e.join(r,".local","share"),t),config:e.join(s.XDG_CONFIG_HOME||e.join(r,".config"),t),cache:e.join(s.XDG_CACHE_HOME||e.join(r,".cache"),t),log:e.join(s.XDG_STATE_HOME||e.join(r,".local","state"),t),temp:e.join(n,o,t)}})(t)};return fe.exports=o,fe.exports.default=o,fe.exports}var de,pe={},me={};function ye(){if(de)return me;de=1,Object.defineProperty(me,"__esModule",{value:!0}),me.NOOP=me.LIMIT_FILES_DESCRIPTORS=me.LIMIT_BASENAME_LENGTH=me.IS_USER_ROOT=me.IS_POSIX=me.DEFAULT_TIMEOUT_SYNC=me.DEFAULT_TIMEOUT_ASYNC=me.DEFAULT_WRITE_OPTIONS=me.DEFAULT_READ_OPTIONS=me.DEFAULT_FOLDER_MODE=me.DEFAULT_FILE_MODE=me.DEFAULT_ENCODING=void 0;me.DEFAULT_ENCODING="utf8";me.DEFAULT_FILE_MODE=438;me.DEFAULT_FOLDER_MODE=511;me.DEFAULT_READ_OPTIONS={};me.DEFAULT_WRITE_OPTIONS={};me.DEFAULT_TIMEOUT_ASYNC=5e3;me.DEFAULT_TIMEOUT_SYNC=100;const e=!!process.getuid;me.IS_POSIX=e;const t=!!process.getuid&&!process.getuid();me.IS_USER_ROOT=t;me.LIMIT_BASENAME_LENGTH=128;me.LIMIT_FILES_DESCRIPTORS=1e4;return me.NOOP=()=>{},me}var ve,ge={},Ee={};var _e,we={};var $e,be,Se,Ne={},Oe={};function Ie(){if(be)return Ne;be=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.retryifySync=Ne.retryifyAsync=void 0;const e=function(){if($e)return Oe;$e=1,Object.defineProperty(Oe,"__esModule",{value:!0});const e={interval:25,intervalId:void 0,limit:ye().LIMIT_FILES_DESCRIPTORS,queueActive:new Set,queueWaiting:new Set,init:()=>{e.intervalId||(e.intervalId=setInterval(e.tick,e.interval))},reset:()=>{e.intervalId&&(clearInterval(e.intervalId),delete e.intervalId)},add:t=>{e.queueWaiting.add(t),e.queueActive.size<e.limit/2?e.tick():e.init()},remove:t=>{e.queueWaiting.delete(t),e.queueActive.delete(t)},schedule:()=>new Promise((t=>{const r=()=>e.remove(n),n=()=>t(r);e.add(n)})),tick:()=>{if(!(e.queueActive.size>=e.limit)){if(!e.queueWaiting.size)return e.reset();for(const t of e.queueWaiting){if(e.queueActive.size>=e.limit)break;e.queueWaiting.delete(t),e.queueActive.add(t),t()}}}};return Oe.default=e,Oe}();Ne.retryifyAsync=(t,r)=>function(n){return function s(){return e.default.schedule().then((e=>t.apply(void 0,arguments).then((t=>(e(),t)),(t=>{if(e(),Date.now()>=n)throw t;if(r(t)){const e=Math.round(100+400*Math.random()),t=new Promise((t=>setTimeout(t,e)));return t.then((()=>s.apply(void 0,arguments)))}throw t}))))}};return Ne.retryifySync=(e,t)=>function(r){return function n(){try{return e.apply(void 0,arguments)}catch(e){if(Date.now()>r)throw e;if(t(e))return n.apply(void 0,arguments);throw e}}},Ne}function Re(){if(Se)return ge;Se=1,Object.defineProperty(ge,"__esModule",{value:!0});const e=E.default,t=S.default,r=function(){if(ve)return Ee;ve=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.attemptifySync=Ee.attemptifyAsync=void 0;const e=ye();return Ee.attemptifyAsync=(t,r=e.NOOP)=>function(){return t.apply(void 0,arguments).catch(r)},Ee.attemptifySync=(t,r=e.NOOP)=>function(){try{return t.apply(void 0,arguments)}catch(e){return r(e)}},Ee}(),n=function(){if(_e)return we;_e=1,Object.defineProperty(we,"__esModule",{value:!0});const e=ye(),t={isChangeErrorOk:t=>{const{code:r}=t;return"ENOSYS"===r||!(e.IS_USER_ROOT||"EINVAL"!==r&&"EPERM"!==r)},isRetriableError:e=>{const{code:t}=e;return"EMFILE"===t||"ENFILE"===t||"EAGAIN"===t||"EBUSY"===t||"EACCESS"===t||"EACCS"===t||"EPERM"===t},onChangeError:e=>{if(!t.isChangeErrorOk(e))throw e}};return we.default=t,we}(),s=Ie(),o={chmodAttempt:r.attemptifyAsync(t.promisify(e.chmod),n.default.onChangeError),chownAttempt:r.attemptifyAsync(t.promisify(e.chown),n.default.onChangeError),closeAttempt:r.attemptifyAsync(t.promisify(e.close)),fsyncAttempt:r.attemptifyAsync(t.promisify(e.fsync)),mkdirAttempt:r.attemptifyAsync(t.promisify(e.mkdir)),realpathAttempt:r.attemptifyAsync(t.promisify(e.realpath)),statAttempt:r.attemptifyAsync(t.promisify(e.stat)),unlinkAttempt:r.attemptifyAsync(t.promisify(e.unlink)),closeRetry:s.retryifyAsync(t.promisify(e.close),n.default.isRetriableError),fsyncRetry:s.retryifyAsync(t.promisify(e.fsync),n.default.isRetriableError),openRetry:s.retryifyAsync(t.promisify(e.open),n.default.isRetriableError),readFileRetry:s.retryifyAsync(t.promisify(e.readFile),n.default.isRetriableError),renameRetry:s.retryifyAsync(t.promisify(e.rename),n.default.isRetriableError),statRetry:s.retryifyAsync(t.promisify(e.stat),n.default.isRetriableError),writeRetry:s.retryifyAsync(t.promisify(e.write),n.default.isRetriableError),chmodSyncAttempt:r.attemptifySync(e.chmodSync,n.default.onChangeError),chownSyncAttempt:r.attemptifySync(e.chownSync,n.default.onChangeError),closeSyncAttempt:r.attemptifySync(e.closeSync),mkdirSyncAttempt:r.attemptifySync(e.mkdirSync),realpathSyncAttempt:r.attemptifySync(e.realpathSync),statSyncAttempt:r.attemptifySync(e.statSync),unlinkSyncAttempt:r.attemptifySync(e.unlinkSync),closeSyncRetry:s.retryifySync(e.closeSync,n.default.isRetriableError),fsyncSyncRetry:s.retryifySync(e.fsyncSync,n.default.isRetriableError),openSyncRetry:s.retryifySync(e.openSync,n.default.isRetriableError),readFileSyncRetry:s.retryifySync(e.readFileSync,n.default.isRetriableError),renameSyncRetry:s.retryifySync(e.renameSync,n.default.isRetriableError),statSyncRetry:s.retryifySync(e.statSync,n.default.isRetriableError),writeSyncRetry:s.retryifySync(e.writeSync,n.default.isRetriableError)};return ge.default=o,ge}var Pe,Te={};var Ae,ke={};var xe,Ce,Le={};function je(){if(Ce)return pe;Ce=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.writeFileSync=pe.writeFile=pe.readFileSync=pe.readFile=void 0;const e=_.default,t=ye(),r=Re(),n=(Pe||(Pe=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.default={isFunction:e=>"function"==typeof e,isString:e=>"string"==typeof e,isUndefined:e=>void 0===e}),Te),s=function(){if(Ae)return ke;Ae=1,Object.defineProperty(ke,"__esModule",{value:!0});const e={},t={next:r=>{const n=e[r];if(!n)return;n.shift();const s=n[0];s?s((()=>t.next(r))):delete e[r]},schedule:r=>new Promise((n=>{let s=e[r];s||(s=e[r]=[]),s.push(n),s.length>1||n((()=>t.next(r)))}))};return ke.default=t,ke}(),o=function(){if(xe)return Le;xe=1,Object.defineProperty(Le,"__esModule",{value:!0});const e=_.default,t=ye(),r=Re(),n={store:{},create:e=>{const t=`000000${Math.floor(16777215*Math.random()).toString(16)}`.slice(-6);return`${e}.tmp-${Date.now().toString().slice(-10)}${t}`},get:(e,t,r=!0)=>{const s=n.truncate(t(e));return s in n.store?n.get(e,t,r):(n.store[s]=r,[s,()=>delete n.store[s]])},purge:e=>{n.store[e]&&(delete n.store[e],r.default.unlinkAttempt(e))},purgeSync:e=>{n.store[e]&&(delete n.store[e],r.default.unlinkSyncAttempt(e))},purgeSyncAll:()=>{for(const e in n.store)n.purgeSync(e)},truncate:r=>{const n=e.basename(r);if(n.length<=t.LIMIT_BASENAME_LENGTH)return r;const s=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(n);if(!s)return r;const o=n.length-t.LIMIT_BASENAME_LENGTH;return`${r.slice(0,-n.length)}${s[1]}${s[2].slice(0,-o)}${s[3]}`}};return process.on("exit",n.purgeSyncAll),Le.default=n,Le}();pe.readFile=function e(s,o=t.DEFAULT_READ_OPTIONS){var i;if(n.default.isString(o))return e(s,{encoding:o});const a=Date.now()+(null!==(i=o.timeout)&&void 0!==i?i:t.DEFAULT_TIMEOUT_ASYNC);return r.default.readFileRetry(a)(s,o)},pe.readFileSync=function e(s,o=t.DEFAULT_READ_OPTIONS){var i;if(n.default.isString(o))return e(s,{encoding:o});const a=Date.now()+(null!==(i=o.timeout)&&void 0!==i?i:t.DEFAULT_TIMEOUT_SYNC);return r.default.readFileSyncRetry(a)(s,o)};const i=(e,r,s,o)=>{if(n.default.isFunction(s))return i(e,r,t.DEFAULT_WRITE_OPTIONS,s);const c=a(e,r,s);return o&&c.then(o,o),c};pe.writeFile=i;const a=async(i,c,l=t.DEFAULT_WRITE_OPTIONS)=>{var u;if(n.default.isString(l))return a(i,c,{encoding:l});const f=Date.now()+(null!==(u=l.timeout)&&void 0!==u?u:t.DEFAULT_TIMEOUT_ASYNC);let h=null,d=null,p=null,m=null,y=null;try{l.schedule&&(h=await l.schedule(i)),d=await s.default.schedule(i),i=await r.default.realpathAttempt(i)||i,[m,p]=o.default.get(i,l.tmpCreate||o.default.create,!(!1===l.tmpPurge));const a=t.IS_POSIX&&n.default.isUndefined(l.chown),u=n.default.isUndefined(l.mode);if(a||u){const e=await r.default.statAttempt(i);e&&(l={...l},a&&(l.chown={uid:e.uid,gid:e.gid}),u&&(l.mode=e.mode))}const v=e.dirname(i);await r.default.mkdirAttempt(v,{mode:t.DEFAULT_FOLDER_MODE,recursive:!0}),y=await r.default.openRetry(f)(m,"w",l.mode||t.DEFAULT_FILE_MODE),l.tmpCreated&&l.tmpCreated(m),n.default.isString(c)?await r.default.writeRetry(f)(y,c,0,l.encoding||t.DEFAULT_ENCODING):n.default.isUndefined(c)||await r.default.writeRetry(f)(y,c,0,c.length,0),!1!==l.fsync&&(!1!==l.fsyncWait?await r.default.fsyncRetry(f)(y):r.default.fsyncAttempt(y)),await r.default.closeRetry(f)(y),y=null,l.chown&&await r.default.chownAttempt(m,l.chown.uid,l.chown.gid),l.mode&&await r.default.chmodAttempt(m,l.mode);try{await r.default.renameRetry(f)(m,i)}catch(e){if("ENAMETOOLONG"!==e.code)throw e;await r.default.renameRetry(f)(m,o.default.truncate(i))}p(),m=null}finally{y&&await r.default.closeAttempt(y),m&&o.default.purge(m),h&&h(),d&&d()}},c=(s,i,a=t.DEFAULT_WRITE_OPTIONS)=>{var l;if(n.default.isString(a))return c(s,i,{encoding:a});const u=Date.now()+(null!==(l=a.timeout)&&void 0!==l?l:t.DEFAULT_TIMEOUT_SYNC);let f=null,h=null,d=null;try{s=r.default.realpathSyncAttempt(s)||s,[h,f]=o.default.get(s,a.tmpCreate||o.default.create,!(!1===a.tmpPurge));const c=t.IS_POSIX&&n.default.isUndefined(a.chown),l=n.default.isUndefined(a.mode);if(c||l){const e=r.default.statSyncAttempt(s);e&&(a={...a},c&&(a.chown={uid:e.uid,gid:e.gid}),l&&(a.mode=e.mode))}const p=e.dirname(s);r.default.mkdirSyncAttempt(p,{mode:t.DEFAULT_FOLDER_MODE,recursive:!0}),d=r.default.openSyncRetry(u)(h,"w",a.mode||t.DEFAULT_FILE_MODE),a.tmpCreated&&a.tmpCreated(h),n.default.isString(i)?r.default.writeSyncRetry(u)(d,i,0,a.encoding||t.DEFAULT_ENCODING):n.default.isUndefined(i)||r.default.writeSyncRetry(u)(d,i,0,i.length,0),!1!==a.fsync&&(!1!==a.fsyncWait?r.default.fsyncSyncRetry(u)(d):r.default.fsyncAttempt(d)),r.default.closeSyncRetry(u)(d),d=null,a.chown&&r.default.chownSyncAttempt(h,a.chown.uid,a.chown.gid),a.mode&&r.default.chmodSyncAttempt(h,a.mode);try{r.default.renameSyncRetry(u)(h,s)}catch(e){if("ENAMETOOLONG"!==e.code)throw e;r.default.renameSyncRetry(u)(h,o.default.truncate(s))}f(),h=null}finally{d&&r.default.closeSyncAttempt(d),h&&o.default.purge(h)}};return pe.writeFileSync=c,pe}var De,Me={},Fe={},Ue={},Ve={};function Ge(){if(De)return Ve;De=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.getRules=Ve.isJSONType=void 0;const e=new Set(["string","number","integer","boolean","null","object","array"]);return Ve.isJSONType=function(t){return"string"==typeof t&&e.has(t)},Ve.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}},Ve}var ze,qe={};function Be(){if(ze)return qe;function e(e,r){return r.rules.some((r=>t(e,r)))}function t(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((t=>void 0!==e[t])))}return ze=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.shouldUseRule=qe.shouldUseGroup=qe.schemaHasRulesForType=void 0,qe.schemaHasRulesForType=function({schema:t,self:r},n){const s=r.RULES.types[n];return s&&!0!==s&&e(t,s)},qe.shouldUseGroup=e,qe.shouldUseRule=t,qe}var He,We={},Xe={},Ke={};function Ye(){return He||(He=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function s(e,...t){const r=[e[0]];let s=0;for(;s<t.length;)a(r,t[s]),r.push(e[++s]);return new n(r)}e._Code=n,e.nil=new n(""),e._=s;const o=new n("+");function i(e,...t){const r=[l(e[0])];let s=0;for(;s<t.length;)r.push(o),a(r,t[s]),r.push(o,l(e[++s]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const r=c(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new n(r)}function a(e,t){var s;t instanceof n?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(s=t)||"boolean"==typeof s||null===s?s:l(Array.isArray(s)?s.join(","):s))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function l(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=i,e.addCodeArg=a,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:i`${e}${t}`},e.stringify=function(e){return new n(l(e))},e.safeStringify=l,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new n(`.${t}`):s`[${t}]`}}(Ke)),Ke}var Je,Ze,Qe={};function et(){return Je||(Je=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Ye();class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var n;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=s;class o extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=t._`.${new t.Name(r)}[${n}]`}}e.ValueScopeName=o;const i=t._`\n`;e.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?i:t.nil}}get(){return this._scope}name(e){return new o(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:s}=n,o=null!==(r=t.key)&&void 0!==r?r:t.ref;let i=this._values[s];if(i){const e=i.get(o);if(e)return e}else i=this._values[s]=new Map;i.set(o,n);const a=this._scope[s]||(this._scope[s]=[]),c=a.length;return a[c]=t.ref,n.setValue(t,{property:s,itemIndex:c}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,r=this._values){return this._reduceValues(r,(r=>{if(void 0===r.scopePath)throw new Error(`CodeGen: name "${r}" has no value`);return t._`${e}${r.scopePath}`}))}scopeCode(e=this._values,t,r){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,r)}_reduceValues(s,o,i={},a){let c=t.nil;for(const l in s){const u=s[l];if(!u)continue;const f=i[l]=i[l]||new Map;u.forEach((s=>{if(f.has(s))return;f.set(s,n.Started);let i=o(s);if(i){const r=this.opts.es5?e.varKinds.var:e.varKinds.const;c=t._`${c}${r} ${s} = ${i};${this.opts._n}`}else{if(!(i=null==a?void 0:a(s)))throw new r(s);c=t._`${c}${i}${this.opts._n}`}f.set(s,n.Completed)}))}return c}}}(Qe)),Qe}function tt(){return Ze||(Ze=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Ye(),r=et();var n=Ye();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=et();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(e,t){return this}}class i extends o{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const n=e?r.varKinds.var:this.varKind,s=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=P(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=P(this.rhs,e,r),this}get names(){return R(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class c extends a{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class l extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class u extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class f extends o{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class h extends o{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=P(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class d extends o{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,r)=>t+r.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const s=r[n];s.optimizeNames(e,t)||(T(e,s.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>I(e,t.names)),{})}}class p extends d{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class m extends d{}class y extends p{}y.kind="else";class v extends p{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof v?t:t.nodes:this.nodes.length?this:new v(A(e),t instanceof v?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=P(this.condition,e,t),this}get names(){const e=super.names;return R(e,this.condition),this.else&&I(e,this.else.names),e}}v.kind="if";class g extends p{}g.kind="for";class E extends g{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=P(this.iteration,e,t),this}get names(){return I(super.names,this.iteration.names)}}class _ extends g{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:n,from:s,to:o}=this;return`for(${t} ${n}=${s}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=R(super.names,this.from);return R(e,this.to)}}class w extends g{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=P(this.iterable,e,t),this}get names(){return I(super.names,this.iterable.names)}}class $ extends p{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}$.kind="func";class b extends d{render(e){return"return "+super.render(e)}}b.kind="return";class S extends p{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&I(e,this.catch.names),this.finally&&I(e,this.finally.names),e}}class N extends p{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}N.kind="catch";class O extends p{render(e){return"finally"+super.render(e)}}O.kind="finally";function I(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function R(e,r){return r instanceof t._CodeOrName?I(e,r.names):e}function P(e,r,n){return e instanceof t.Name?o(e):(s=e)instanceof t._Code&&s._items.some((e=>e instanceof t.Name&&1===r[e.str]&&void 0!==n[e.str]))?new t._Code(e._items.reduce(((e,r)=>(r instanceof t.Name&&(r=o(r)),r instanceof t._Code?e.push(...r._items):e.push(r),e)),[])):e;var s;function o(e){const t=n[e.str];return void 0===t||1!==r[e.str]?e:(delete r[e.str],t)}}function T(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function A(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${L(e)}`}e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const s=this._scope.toName(t);return void 0!==r&&n&&(this._constants[s.str]=r),this._leafNode(new i(e,s,r)),s}const(e,t,n){return this._def(r.varKinds.const,e,t,n)}let(e,t,n){return this._def(r.varKinds.let,e,t,n)}var(e,t,n){return this._def(r.varKinds.var,e,t,n)}assign(e,t,r){return this._leafNode(new a(e,t,r))}add(t,r){return this._leafNode(new c(t,e.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new h(e)),this}object(...e){const r=["{"];for(const[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),t.addCodeArg(r,s));return r.push("}"),new t._Code(r)}if(e,t,r){if(this._blockNode(new v(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new v(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(v,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new E(e),t)}forRange(e,t,n,s,o=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const i=this._scope.toName(e);return this._for(new _(o,i,t,n),(()=>s(i)))}forOf(e,n,s,o=r.varKinds.const){const i=this._scope.toName(e);if(this.opts.es5){const e=n instanceof t.Name?n:this.var("_arr",n);return this.forRange("_i",0,t._`${e}.length`,(r=>{this.var(i,t._`${e}[${r}]`),s(i)}))}return this._for(new w("of",o,i,n),(()=>s(i)))}forIn(e,n,s,o=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${n})`,s);const i=this._scope.toName(e);return this._for(new w("in",o,i,n),(()=>s(i)))}endFor(){return this._endBlockNode(g)}label(e){return this._leafNode(new l(e))}break(e){return this._leafNode(new u(e))}return(e){const t=new b;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(b)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new S;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new N(e),t(e)}return r&&(this._currNode=n.finally=new O,this.code(r)),this._endBlockNode(N,O)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,r=t.nil,n,s){return this._blockNode(new $(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode($)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=A;const k=C(e.operators.AND);e.and=function(...e){return e.reduce(k)};const x=C(e.operators.OR);function C(e){return(r,n)=>r===t.nil?n:n===t.nil?r:t._`${L(r)} ${e} ${L(n)}`}function L(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(x)}}(Xe)),Xe}var rt,nt,st={};function ot(){if(rt)return st;rt=1,Object.defineProperty(st,"__esModule",{value:!0});const e=tt(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),dataPath:new e.Name("dataPath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return st.default=t,st}function it(){return nt||(nt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=tt(),r=ot();function n(e,n){const s=e.const("err",n);e.if(t._`${r.default.vErrors} === null`,(()=>e.assign(r.default.vErrors,t._`[${s}]`)),t._`${r.default.vErrors}.push(${s})`),e.code(t._`${r.default.errors}++`)}function s(e,r){const{gen:n,validateName:s,schemaEnv:o}=e;o.$async?n.throw(t._`new ${e.ValidationError}(${r})`):(n.assign(t._`${s}.errors`,r),n.return(!1))}e.keywordError={message:({keyword:e})=>t.str`should pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:r})=>r?t.str`"${e}" keyword must be ${r} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(r,o=e.keywordError,a){const{it:c}=r,{gen:l,compositeRule:u,allErrors:f}=c,h=i(r,o);(null!=a?a:u||f)?n(l,h):s(c,t._`[${h}]`)},e.reportExtraError=function(t,o=e.keywordError){const{it:a}=t,{gen:c,compositeRule:l,allErrors:u}=a;n(c,i(t,o)),l||u||s(a,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if(t._`${r.default.vErrors} !== null`,(()=>e.if(n,(()=>e.assign(t._`${r.default.vErrors}.length`,n)),(()=>e.assign(r.default.vErrors,null)))))},e.extendErrors=function({gen:e,keyword:n,schemaValue:s,data:o,errsCount:i,it:a}){if(void 0===i)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",i,r.default.errors,(i=>{e.const(c,t._`${r.default.vErrors}[${i}]`),e.if(t._`${c}.dataPath === undefined`,(()=>e.assign(t._`${c}.dataPath`,t.strConcat(r.default.dataPath,a.errorPath)))),e.assign(t._`${c}.schemaPath`,t.str`${a.errSchemaPath}/${n}`),a.opts.verbose&&(e.assign(t._`${c}.schema`,s),e.assign(t._`${c}.data`,o))}))};const o={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema"),instancePath:new t.Name("instancePath")};function i(e,r){const{createErrors:n,opts:s}=e.it;return!1===n?t._`{}`:(s.jtd&&!s.ajvErrors?a:c)(e,r)}function a(e,{message:n}){const{gen:s,keyword:i,it:a}=e,{errorPath:c,errSchemaPath:l,opts:u}=a,f=[[o.instancePath,t.strConcat(r.default.dataPath,c)],[o.schemaPath,t.str`${l}/${i}`]];return u.messages&&f.push([o.message,"function"==typeof n?n(e):n]),s.object(...f)}function c(e,n){const{gen:s,keyword:i,data:a,schemaValue:c,it:l}=e,{topSchemaRef:u,schemaPath:f,errorPath:h,errSchemaPath:d,propertyName:p,opts:m}=l,{params:y,message:v}=n,g=[[o.keyword,i],[r.default.dataPath,t.strConcat(r.default.dataPath,h)],[o.schemaPath,t.str`${d}/${i}`],[o.params,"function"==typeof y?y(e):y||t._`{}`]];return p&&g.push([o.propertyName,p]),m.messages&&g.push([o.message,"function"==typeof v?v(e):v]),m.verbose&&g.push([o.schema,c],[o.parentSchema,t._`${u}${f}`],[r.default.data,a]),s.object(...g)}}(We)),We}var at,ct={},lt={},ut={};var ft,ht={},dt={};var pt,mt,yt,vt,gt={},Et={},_t={};function wt(){return pt||(pt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.applySubschema=e.Type=void 0;const t=Vt(),r=Gt(),n=tt();var s;!function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(s=e.Type||(e.Type={})),e.applySubschema=function(e,o,i){const a=function(e,{keyword:t,schemaProp:s,schema:o,schemaPath:i,errSchemaPath:a,topSchemaRef:c}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===s?{schema:o,schemaPath:n._`${e.schemaPath}${n.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[s],schemaPath:n._`${e.schemaPath}${n.getProperty(t)}${n.getProperty(s)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${r.escapeFragment(s)}`}}if(void 0!==o){if(void 0===i||void 0===a||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:i,topSchemaRef:c,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}(e,o);!function(e,t,{dataProp:o,dataPropType:i,data:a,dataTypes:c,propertyName:l}){if(void 0!==a&&void 0!==o)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(void 0!==o){const{errorPath:a,dataPathArr:c,opts:l}=t;f(u.let("data",n._`${t.data}${n.getProperty(o)}`,!0)),e.errorPath=n.str`${a}${function(e,t,o){if(e instanceof n.Name){const r=t===s.Num;return o?r?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:r?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return o?n.getProperty(e).toString():"/"+r.escapeJsonPointer(e)}(o,i,l.jsPropertySyntax)}`,e.parentDataProperty=n._`${o}`,e.dataPathArr=[...c,e.parentDataProperty]}if(void 0!==a){f(a instanceof n.Name?a:u.let("data",a,!0)),void 0!==l&&(e.propertyName=l)}c&&(e.dataTypes=c);function f(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}}(a,e,o),function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){void 0!==n&&(e.compositeRule=n);void 0!==s&&(e.createErrors=s);void 0!==o&&(e.allErrors=o);e.jtdDiscriminator=t,e.jtdMetadata=r}(a,o);const c={...e,...a,items:void 0,props:void 0};return t.subschemaCode(c,i),c}}(_t)),_t}function $t(){if(mt)return Et;mt=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.validateUnion=Et.validateArray=Et.usePattern=Et.callValidateCode=Et.schemaProperties=Et.allSchemaProperties=Et.noPropertyInData=Et.propertyInData=Et.isOwnProperty=Et.hasPropFunc=Et.reportMissingProp=Et.checkMissingProp=Et.checkReportMissingProp=void 0;const e=tt(),t=Gt(),r=wt(),n=ot();function s(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:e._`Object.prototype.hasOwnProperty`})}function o(t,r,n){return e._`${s(t)}.call(${r}, ${n})`}function i(t,r,n,s){const i=e._`${r}${e.getProperty(n)} === undefined`;return s?e.or(i,e.not(o(t,r,n))):i}function a(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}return Et.checkReportMissingProp=function(t,r){const{gen:n,data:s,it:o}=t;n.if(i(n,s,r,o.opts.ownProperties),(()=>{t.setParams({missingProperty:e._`${r}`},!0),t.error()}))},Et.checkMissingProp=function({gen:t,data:r,it:{opts:n}},s,o){return e.or(...s.map((s=>e.and(i(t,r,s,n.ownProperties),e._`${o} = ${s}`))))},Et.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},Et.hasPropFunc=s,Et.isOwnProperty=o,Et.propertyInData=function(t,r,n,s){const i=e._`${r}${e.getProperty(n)} !== undefined`;return s?e._`${i} && ${o(t,r,n)}`:i},Et.noPropertyInData=i,Et.allSchemaProperties=a,Et.schemaProperties=function(e,r){return a(r).filter((n=>!t.alwaysValidSchema(e,r[n])))},Et.callValidateCode=function({schemaCode:t,data:r,it:{gen:s,topSchemaRef:o,schemaPath:i,errorPath:a},it:c},l,u,f){const h=f?e._`${t}, ${r}, ${o}${i}`:r,d=[[n.default.dataPath,e.strConcat(n.default.dataPath,a)],[n.default.parentData,c.parentData],[n.default.parentDataProperty,c.parentDataProperty],[n.default.rootData,n.default.rootData]];c.opts.dynamicRef&&d.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const p=e._`${h}, ${s.object(...d)}`;return u!==e.nil?e._`${l}.call(${u}, ${p})`:e._`${l}(${p})`},Et.usePattern=function(t,r){return t.scopeValue("pattern",{key:r,ref:new RegExp(r,"u"),code:e._`new RegExp(${r}, "u")`})},Et.validateArray=function(t){const{gen:n,data:s,keyword:o,it:i}=t,a=n.name("valid");if(i.allErrors){const e=n.let("valid",!0);return c((()=>n.assign(e,!1))),e}return n.var(a,!0),c((()=>n.break())),a;function c(i){const c=n.const("len",e._`${s}.length`);n.forRange("i",0,c,(s=>{t.subschema({keyword:o,dataProp:s,dataPropType:r.Type.Num},a),n.if(e.not(a),i)}))}},Et.validateUnion=function(r){const{gen:n,schema:s,keyword:o,it:i}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");if(s.some((e=>t.alwaysValidSchema(i,e)))&&!i.opts.unevaluated)return;const a=n.let("valid",!1),c=n.name("_valid");n.block((()=>s.forEach(((t,s)=>{const i=r.subschema({keyword:o,schemaProp:s,compositeRule:!0},c);n.assign(a,e._`${a} || ${c}`);r.mergeValidEvaluated(i,c)||n.if(e.not(a))})))),r.result(a,(()=>r.reset()),(()=>r.error(!0)))},Et}function bt(){if(yt)return gt;yt=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.keywordCode=void 0;const e=qt(),t=it(),r=$t(),n=tt(),s=ot();function o(e,o){var c;const{gen:l,keyword:u,schema:f,parentSchema:h,$data:d,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,o);const m=!d&&o.compile?o.compile.call(p.self,f,h,p):o.validate,y=a(l,u,m),v=l.let("valid");function g(t=(o.async?n._`await `:n.nil)){const i=p.opts.passContext?s.default.this:s.default.self,a=!("compile"in o&&!d||!1===o.schema);l.assign(v,n._`${t}${r.callValidateCode(e,y,i,a)}`,o.modifying)}function E(e){var t;l.if(n.not(null!==(t=o.valid)&&void 0!==t?t:v),e)}e.block$data(v,(function(){if(!1===o.errors)g(),o.modifying&&i(e),E((()=>e.error()));else{const r=o.async?function(){const e=l.let("ruleErrs",null);return l.try((()=>g(n._`await `)),(t=>l.assign(v,!1).if(n._`${t} instanceof ${p.ValidationError}`,(()=>l.assign(e,n._`${t}.errors`)),(()=>l.throw(t))))),e}():function(){const e=n._`${y}.errors`;return l.assign(e,null),g(n.nil),e}();o.modifying&&i(e),E((()=>function(e,r){const{gen:o}=e;o.if(n._`Array.isArray(${r})`,(()=>{o.assign(s.default.vErrors,n._`${s.default.vErrors} === null ? ${r} : ${s.default.vErrors}.concat(${r})`).assign(s.default.errors,n._`${s.default.vErrors}.length`),t.extendErrors(e)}),(()=>e.error()))}(e,r)))}})),e.ok(null!==(c=o.valid)&&void 0!==c?c:v)}function i(e){const{gen:t,data:r,it:s}=e;t.if(s.parentData,(()=>t.assign(r,n._`${s.parentData}[${s.parentDataProperty}]`)))}function a(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:n.stringify(r)})}return gt.keywordCode=function(t,r,s,i){const c=new e.default(t,s,r);"code"in s?s.code(c,i):c.$data&&s.validate?o(c,s):"macro"in s?function(e,t){const{gen:r,keyword:s,schema:o,parentSchema:i,it:c}=e,l=t.macro.call(c.self,o,i,c),u=a(r,s,l);!1!==c.opts.validateSchema&&c.self.validateSchema(l,!0);const f=r.name("valid");e.subschema({schema:l,schemaPath:n.nil,errSchemaPath:`${c.errSchemaPath}/${s}`,topSchemaRef:u,compositeRule:!0},f),e.pass(f,(()=>e.error(!0)))}(c,s):(s.compile||s.validate)&&o(c,s)},gt}function St(){if(vt)return ht;vt=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.schemaKeywords=void 0;const e=Be(),t=zt(),r=function(){if(ft)return dt;ft=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.assignDefaults=void 0;const e=tt(),t=Vt();function r(r,n,s){const{gen:o,compositeRule:i,data:a,opts:c}=r;if(void 0===s)return;const l=e._`${a}${e.getProperty(n)}`;if(i)return void t.checkStrictMode(r,`default is ignored for: ${l}`);let u=e._`${l} === undefined`;"empty"===c.useDefaults&&(u=e._`${u} || ${l} === null || ${l} === ""`),o.if(u,e._`${l} = ${e.stringify(s)}`)}return dt.assignDefaults=function(e,t){const{properties:n,items:s}=e.schema;if("object"===t&&n)for(const t in n)r(e,t,n[t].default);else"array"===t&&Array.isArray(s)&&s.forEach(((t,n)=>r(e,n,t.default)))},dt}(),n=bt(),s=Gt(),o=Vt(),i=tt(),a=ot();function c(t,s){const{gen:o,schema:i,opts:{useDefaults:a}}=t;a&&r.assignDefaults(t,s.type),o.block((()=>{for(const r of s.rules)e.shouldUseRule(i,r)&&n.keywordCode(t,r.keyword,r.definition,s.type)}))}function l(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function u(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function f(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,o.checkStrictMode(e,t,e.opts.strictTypes)}return ht.schemaKeywords=function(r,o,h,d){const{gen:p,schema:m,data:y,allErrors:v,opts:g,self:E}=r,{RULES:_}=E;function w(n){e.shouldUseGroup(m,n)&&(n.type?(p.if(t.checkDataType(n.type,y,g.strict)),c(r,n),1===o.length&&o[0]===n.type&&h&&(p.else(),t.reportTypeError(r)),p.endIf()):c(r,n),v||p.if(i._`${a.default.errors} === ${d||0}`))}!m.$ref||!g.ignoreKeywordsWithRef&&s.schemaHasRulesButRef(m,_)?(g.jtd||function(t,r){if(t.schemaEnv.meta||!t.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{u(e.dataTypes,t)||f(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>u(t,e)))})(t,r),t.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&f(e,"use allowUnionTypes to allow union type keyword")}(t,r);!function(t,r){const n=t.self.RULES.all;for(const s in n){const o=n[s];if("object"==typeof o&&e.shouldUseRule(t.schema,o)){const{type:e}=o.definition;e.length&&!e.some((e=>l(r,e)))&&f(t,`missing type "${e.join(",")}" for keyword "${s}"`)}}}(t,t.dataTypes)}(r,o),p.block((()=>{for(const e of _.rules)w(e);w(_.post)}))):p.block((()=>n.keywordCode(r,"$ref",_.all.$ref.definition)))},ht}var Nt,Ot,It={};function Rt(){return Ot?Nt:(Ot=1,Nt=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;0!=s--;){var i=o[s];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r})}var Pt,Tt={exports:{}};function At(){if(Pt)return Tt.exports;Pt=1;var e=Tt.exports=function(e,r,n){"function"==typeof r&&(n=r,r={}),t(r,"function"==typeof(n=r.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function t(r,n,s,o,i,a,c,l,u,f){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var h in n(o,i,a,c,l,u,f),o){var d=o[h];if(Array.isArray(d)){if(h in e.arrayKeywords)for(var p=0;p<d.length;p++)t(r,n,s,d[p],i+"/"+h+"/"+p,a,i,h,o,p)}else if(h in e.propsKeywords){if(d&&"object"==typeof d)for(var m in d)t(r,n,s,d[m],i+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,i,h,o,m)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,n,s,d,i+"/"+h,a,i,h,o)}s(o,i,a,c,l,u,f)}}return e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Tt.exports}var kt,xt,Ct,Lt,jt,Dt,Mt={exports:{}};
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */function Ft(){return kt||(kt=1,function(e,t){!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,s=1;s<n;++s)t[s]=t[s].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function s(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function i(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}function a(e){var n="[A-Za-z]",s="[0-9]",o=t(s,"[A-Fa-f]"),i=r(r("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+r("%[89A-Fa-f]"+o+"%"+o+o)+"|"+r("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=t("[\\:\\/\\?\\#\\[\\]\\@]",a),l=e?"[\\uE000-\\uF8FF]":"[]",u=t(n,s,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(n+t(n,s,"[\\+\\-\\.]")+"*"),r(r(i+"|"+t(u,a,"[\\:]"))+"*");var f=r(r("25[0-5]")+"|"+r("2[0-4]"+s)+"|"+r("1"+s+s)+"|"+r("0?[1-9]"+s)+"|0?0?"+s),h=r(f+"\\."+f+"\\."+f+"\\."+f),d=r(o+"{1,4}"),p=r(r(d+"\\:"+d)+"|"+h),m=r(r(d+"\\:")+"{6}"+p),y=r("\\:\\:"+r(d+"\\:")+"{5}"+p),v=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+p),g=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+p),E=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+p),_=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),w=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),$=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),b=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=r([m,y,v,g,E,_,w,$,b].join("|")),N=r(r(u+"|"+i)+"+");r("[vV]"+o+"+\\."+t(u,a,"[\\:]")+"+"),r(r(i+"|"+t(u,a))+"*");var O=r(i+"|"+t(u,a,"[\\:\\@]"));return r(r(i+"|"+t(u,a,"[\\@]"))+"+"),r(r(O+"|"+t("[\\/\\?]",l))+"*"),{NOT_SCHEME:new RegExp(t("[^]",n,s,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,c),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+r(r("\\%25|\\%(?!"+o+"{2})")+"("+N+")")+"?\\]?$")}}var c=a(!1),l=a(!0),u=function(){function e(e,t){var r=[],n=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},h=2147483647,d=36,p=1,m=26,y=38,v=700,g=72,E=128,_="-",w=/^xn--/,$=/[^\0-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=d-p,O=Math.floor,I=String.fromCharCode;function R(e){throw new RangeError(S[e])}function P(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}function T(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+P((e=e.replace(b,".")).split("."),t).join(".")}function A(e){for(var t=[],r=0,n=e.length;r<n;){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&s)<<10)+(1023&o)+65536):(t.push(s),r--)}else t.push(s)}return t}var k=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:d},x=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},C=function(e,t,r){var n=0;for(e=r?O(e/v):e>>1,e+=O(e/t);e>N*m>>1;n+=d)e=O(e/N);return O(n+(N+1)*e/(e+y))},L=function(e){var t=[],r=e.length,n=0,s=E,o=g,i=e.lastIndexOf(_);i<0&&(i=0);for(var a=0;a<i;++a)e.charCodeAt(a)>=128&&R("not-basic"),t.push(e.charCodeAt(a));for(var c=i>0?i+1:0;c<r;){for(var l=n,u=1,f=d;;f+=d){c>=r&&R("invalid-input");var y=k(e.charCodeAt(c++));(y>=d||y>O((h-n)/u))&&R("overflow"),n+=y*u;var v=f<=o?p:f>=o+m?m:f-o;if(y<v)break;var w=d-v;u>O(h/w)&&R("overflow"),u*=w}var $=t.length+1;o=C(n-l,$,0==l),O(n/$)>h-s&&R("overflow"),s+=O(n/$),n%=$,t.splice(n++,0,s)}return String.fromCodePoint.apply(String,t)},j=function(e){var t=[],r=(e=A(e)).length,n=E,s=0,o=g,i=!0,a=!1,c=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var f=l.value;f<128&&t.push(I(f))}}catch(e){a=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw c}}var y=t.length,v=y;for(y&&t.push(_);v<r;){var w=h,$=!0,b=!1,S=void 0;try{for(var N,P=e[Symbol.iterator]();!($=(N=P.next()).done);$=!0){var T=N.value;T>=n&&T<w&&(w=T)}}catch(e){b=!0,S=e}finally{try{!$&&P.return&&P.return()}finally{if(b)throw S}}var k=v+1;w-n>O((h-s)/k)&&R("overflow"),s+=(w-n)*k,n=w;var L=!0,j=!1,D=void 0;try{for(var M,F=e[Symbol.iterator]();!(L=(M=F.next()).done);L=!0){var U=M.value;if(U<n&&++s>h&&R("overflow"),U==n){for(var V=s,G=d;;G+=d){var z=G<=o?p:G>=o+m?m:G-o;if(V<z)break;var q=V-z,B=d-z;t.push(I(x(z+q%B,0))),V=O(q/B)}t.push(I(x(V,0))),o=C(s,k,v==y),s=0,++v}}}catch(e){j=!0,D=e}finally{try{!L&&F.return&&F.return()}finally{if(j)throw D}}++s,++n}return t.join("")},D=function(e){return T(e,(function(e){return w.test(e)?L(e.slice(4).toLowerCase()):e}))},M=function(e){return T(e,(function(e){return $.test(e)?"xn--"+j(e):e}))},F={version:"2.1.0",ucs2:{decode:A,encode:function(e){return String.fromCodePoint.apply(String,f(e))}},decode:L,encode:j,toASCII:M,toUnicode:D},U={};function V(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function G(e){for(var t="",r=0,n=e.length;r<n;){var s=parseInt(e.substr(r+1,2),16);if(s<128)t+=String.fromCharCode(s),r+=3;else if(s>=194&&s<224){if(n-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&s)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(s>=224){if(n-r>=9){var i=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function z(e,t){function r(e){var r=G(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,V).replace(t.PCT_ENCODED,s)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,V).replace(t.PCT_ENCODED,s)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,V).replace(t.PCT_ENCODED,s)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,V).replace(t.PCT_ENCODED,s)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,V).replace(t.PCT_ENCODED,s)),e}function q(e){return e.replace(/^0*(.*)/,"$1")||"0"}function B(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(q).join("."):e}function H(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),s=n[1],o=n[2];if(s){for(var i=s.toLowerCase().split("::").reverse(),a=u(i,2),c=a[0],l=a[1],f=l?l.split(":").map(q):[],h=c.split(":").map(q),d=t.IPV4ADDRESS.test(h[h.length-1]),p=d?7:8,m=h.length-p,y=Array(p),v=0;v<p;++v)y[v]=f[v]||h[m+v]||"";d&&(y[p-1]=B(y[p-1],t));var g=y.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],E=void 0;if(g&&g.length>1){var _=y.slice(0,g.index),w=y.slice(g.index+g.length);E=_.join(":")+"::"+w.join(":")}else E=y.join(":");return o&&(E+="%"+o),E}return e}var W=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,X=void 0==="".match(/(){0}/)[1];function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?l:c;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var s=e.match(W);if(s){X?(r.scheme=s[1],r.userinfo=s[3],r.host=s[4],r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=s[7],r.fragment=s[8],isNaN(r.port)&&(r.port=s[5])):(r.scheme=s[1]||void 0,r.userinfo=-1!==e.indexOf("@")?s[3]:void 0,r.host=-1!==e.indexOf("//")?s[4]:void 0,r.port=parseInt(s[5],10),r.path=s[6]||"",r.query=-1!==e.indexOf("?")?s[7]:void 0,r.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),r.host&&(r.host=H(B(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=U[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)z(r,n);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=F.toASCII(r.host.replace(n.PCT_ENCODED,G).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}z(r,c)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function Y(e,t){var r=!1!==t.iri?l:c,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(H(B(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var J=/^\.\.?\//,Z=/^\/\.(\/|$)/,Q=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(J))e=e.replace(J,"");else if(e.match(Z))e=e.replace(Z,"/");else if(e.match(Q))e=e.replace(Q,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(ee);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?l:c,n=[],s=U[(t.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||s&&s.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(r.PCT_ENCODED,G).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}z(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var o=Y(e,t);if(void 0!==o&&("suffix"!==t.reference&&n.push("//"),n.push(o),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var i=e.path;t.absolutePath||s&&s.absolutePath||(i=te(i)),void 0===o&&(i=i.replace(/^\/\//,"/%2F")),n.push(i)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function ne(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=K(re(e,r),r),t=K(re(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=te(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=te(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=te(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function se(e,t,r){var n=i({scheme:"null"},r);return re(ne(K(e,n),K(t,n),n,!0),n)}function oe(e,t){return"string"==typeof e?e=re(K(e,t),t):"object"===n(e)&&(e=K(re(e,t),t)),e}function ie(e,t,r){return"string"==typeof e?e=re(K(e,r),r):"object"===n(e)&&(e=re(e,r)),"string"==typeof t?t=re(K(t,r),r):"object"===n(t)&&(t=re(t,r)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?l.ESCAPE:c.ESCAPE,V)}function ce(e,t){return e&&e.toString().replace(t&&t.iri?l.PCT_ENCODED:c.PCT_ENCODED,G)}var le={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:le.domainHost,parse:le.parse,serialize:le.serialize};function fe(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=fe(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(fe(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=u(r,2),s=n[0],o=n[1];e.path=s&&"/"!==s?s:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},de={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},pe={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ye="[0-9A-Fa-f]",ve=r(r("%[EFef]"+ye+"%"+ye+ye+"%"+ye+ye)+"|"+r("%[89A-Fa-f]"+ye+"%"+ye+ye)+"|"+r("%"+ye+ye)),ge="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),_e="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",we=new RegExp(me,"g"),$e=new RegExp(ve,"g"),be=new RegExp(t("[^]",ge,"[\\.]",'[\\"]',Ee),"g"),Se=new RegExp(t("[^]",me,_e),"g"),Ne=Se;function Oe(e){var t=G(e);return t.match(we)?t:e}var Ie={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var s=!1,o={},i=r.query.split("&"),a=0,c=i.length;a<c;++a){var l=i[a].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),f=0,h=u.length;f<h;++f)n.push(u[f]);break;case"subject":r.subject=ce(l[1],t);break;case"body":r.body=ce(l[1],t);break;default:s=!0,o[ce(l[0],t)]=ce(l[1],t)}}s&&(r.headers=o)}r.query=void 0;for(var d=0,p=n.length;d<p;++d){var m=n[d].split("@");if(m[0]=ce(m[0]),t.unicodeSupport)m[1]=ce(m[1],t).toLowerCase();else try{m[1]=F.toASCII(ce(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[d]=m.join("@")}return r},serialize:function(e,t){var r=e,n=o(e.to);if(n){for(var i=0,a=n.length;i<a;++i){var c=String(n[i]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace($e,Oe).replace($e,s).replace(be,V),f=c.slice(l+1);try{f=t.iri?F.toUnicode(f):F.toASCII(ce(f,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[i]=u+"@"+f}r.path=n.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var d=[];for(var p in h)h[p]!==pe[p]&&d.push(p.replace($e,Oe).replace($e,s).replace(Se,V)+"="+h[p].replace($e,Oe).replace($e,s).replace(Ne,V));return d.length&&(r.query=d.join("&")),r}},Re=/^([^\:]+)\:(.*)/,Pe={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(Re),n=e;if(r){var s=t.scheme||n.scheme||"urn",o=r[1].toLowerCase(),i=r[2],a=s+":"+(t.nid||o),c=U[a];n.nid=o,n.nss=i,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,s=r+":"+(t.nid||n),o=U[s];o&&(e=o.serialize(e,t));var i=e,a=e.nss;return i.path=(n||t.nid)+":"+a,i}},Te=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ae={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(Te)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};U[le.scheme]=le,U[ue.scheme]=ue,U[he.scheme]=he,U[de.scheme]=de,U[Ie.scheme]=Ie,U[Pe.scheme]=Pe,U[Ae.scheme]=Ae,e.SCHEMES=U,e.pctEncChar=V,e.pctDecChars=G,e.parse=K,e.removeDotSegments=te,e.serialize=re,e.resolveComponents=ne,e.resolve=se,e.normalize=oe,e.equal=ie,e.escapeComponent=ae,e.unescapeComponent=ce,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,Mt.exports)),Mt.exports}function Ut(){if(xt)return It;xt=1,Object.defineProperty(It,"__esModule",{value:!0}),It.getSchemaRefs=It.resolveUrl=It.normalizeId=It._getFullPath=It.getFullPath=It.inlineRef=void 0;const e=Gt(),t=Rt(),r=At(),n=Ft(),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);It.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!i(e):!!t&&a(e)<=t)};const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function i(e){for(const t in e){if(o.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(i))return!0;if("object"==typeof r&&i(r))return!0}return!1}function a(t){let r=0;for(const n in t){if("$ref"===n)return 1/0;if(r++,!s.has(n)&&("object"==typeof t[n]&&e.eachItem(t[n],(e=>r+=a(e))),r===1/0))return 1/0}return r}function c(e="",t){!1!==t&&(e=f(e));return l(n.parse(e))}function l(e){return n.serialize(e).split("#")[0]+"#"}It.getFullPath=c,It._getFullPath=l;const u=/#\/?$/;function f(e){return e?e.replace(u,""):""}It.normalizeId=f,It.resolveUrl=function(e,t){return t=f(t),n.resolve(e,t)};const h=/^[a-z_][-a-z0-9._]*$/i;return It.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const s=f(e.$id),o={"":s},i=c(s,!1),a={},l=new Set;return r(e,{allKeys:!0},((e,t,r,s)=>{if(void 0===s)return;const c=i+t;let p=o[s];function m(t){if(t=f(p?n.resolve(p,t):t),l.has(t))throw d(t);l.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?u(e,r.schema,t):t!==f(c)&&("#"===t[0]?(u(e,a[t],t),a[t]=e):this.refs[t]=c),t}function y(e){if("string"==typeof e){if(!h.test(e))throw new Error(`invalid anchor "${e}"`);m.call(this,`#${e}`)}}"string"==typeof e.$id&&(p=m.call(this,e.$id)),y.call(this,e.$anchor),y.call(this,e.$dynamicAnchor),o[t]=p})),a;function u(e,r,n){if(void 0!==r&&!t(e,r))throw d(n)}function d(e){return new Error(`reference "${e}" resolves to more than one schema`)}},It}function Vt(){if(Ct)return lt;Ct=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.checkStrictMode=lt.schemaCxtHasRules=lt.subschemaCode=lt.validateFunctionCode=void 0;const e=function(){if(at)return ut;at=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.boolOrEmptySchema=ut.topBoolOrEmptySchema=void 0;const e=it(),t=tt(),r=ot(),n={message:"boolean schema is false"};function s(t,r){const{gen:s,data:o}=t,i={gen:s,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};e.reportError(i,n,r)}return ut.topBoolOrEmptySchema=function(e){const{gen:n,schema:o,validateName:i}=e;!1===o?s(e,!1):"object"==typeof o&&!0===o.$async?n.return(r.default.data):(n.assign(t._`${i}.errors`,null),n.return(!0))},ut.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),s(e)):r.var(t,!0)},ut}(),t=zt(),r=St(),n=tt(),s=ot(),o=Ut(),i=Gt();function a({gen:e,validateName:t,schema:r,schemaEnv:o,opts:i},a){i.code.es5?e.func(t,n._`${s.default.data}, ${s.default.valCxt}`,o.$async,(()=>{e.code(n._`"use strict"; ${c(r,i)}`),function(e,t){e.if(s.default.valCxt,(()=>{e.var(s.default.dataPath,n._`${s.default.valCxt}.${s.default.dataPath}`),e.var(s.default.parentData,n._`${s.default.valCxt}.${s.default.parentData}`),e.var(s.default.parentDataProperty,n._`${s.default.valCxt}.${s.default.parentDataProperty}`),e.var(s.default.rootData,n._`${s.default.valCxt}.${s.default.rootData}`),t.dynamicRef&&e.var(s.default.dynamicAnchors,n._`${s.default.valCxt}.${s.default.dynamicAnchors}`)}),(()=>{e.var(s.default.dataPath,n._`""`),e.var(s.default.parentData,n._`undefined`),e.var(s.default.parentDataProperty,n._`undefined`),e.var(s.default.rootData,s.default.data),t.dynamicRef&&e.var(s.default.dynamicAnchors,n._`{}`)}))}(e,i),e.code(a)})):e.func(t,n._`${s.default.data}, ${function(e){return n._`{${s.default.dataPath}="", ${s.default.parentData}, ${s.default.parentDataProperty}, ${s.default.rootData}=${s.default.data}${e.dynamicRef?n._`, ${s.default.dynamicAnchors}={}`:n.nil}}={}`}(i)}`,o.$async,(()=>e.code(c(r,i)).code(a)))}function c(e,t){return"object"==typeof e&&e.$id&&(t.code.source||t.code.process)?n._`/*# sourceURL=${e.$id} */`:n.nil}function l({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function u(e){return"boolean"!=typeof e.schema}function f(e){i.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&i.schemaHasRulesButRef(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function h(e,n){if(e.opts.jtd)return r.schemaKeywords(e,[],!1,n);const s=t.getSchemaTypes(e.schema),o=t.coerceAndCheckDataType(e,s);r.schemaKeywords(e,s,!o,n)}function d({gen:e,schemaEnv:t,schema:r,errSchemaPath:o,opts:i}){const a=r.$comment;if(!0===i.$comment)e.code(n._`${s.default.self}.logger.log(${a})`);else if("function"==typeof i.$comment){const r=n.str`${o}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(n._`${s.default.self}.opts.$comment(${a}, ${r}, ${i}.schema)`)}}function p(e,t,r=e.opts.strict){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}return lt.validateFunctionCode=function(t){u(t)&&(f(t),l(t))?function(e){const{schema:t,opts:r,gen:o}=e;a(e,(()=>{r.$comment&&t.$comment&&d(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strict&&p(e,"default is ignored in the schema root")}(e),o.let(s.default.vErrors,null),o.let(s.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",n._`${r}.evaluated`),t.if(n._`${e.evaluated}.dynamicProps`,(()=>t.assign(n._`${e.evaluated}.props`,n._`undefined`))),t.if(n._`${e.evaluated}.dynamicItems`,(()=>t.assign(n._`${e.evaluated}.items`,n._`undefined`)))}(e),h(e),function(e){const{gen:t,schemaEnv:r,validateName:o,ValidationError:i,opts:a}=e;r.$async?t.if(n._`${s.default.errors} === 0`,(()=>t.return(s.default.data)),(()=>t.throw(n._`new ${i}(${s.default.vErrors})`))):(t.assign(n._`${o}.errors`,s.default.vErrors),a.unevaluated&&function({gen:e,evaluated:t,props:r,items:s}){r instanceof n.Name&&e.assign(n._`${t}.props`,r);s instanceof n.Name&&e.assign(n._`${t}.items`,s)}(e),t.return(n._`${s.default.errors} === 0`))}(e)}))}(t):a(t,(()=>e.topBoolOrEmptySchema(t)))},lt.subschemaCode=function(t,r){u(t)&&(f(t),l(t))?function(e,t){const{schema:r,gen:i,opts:a}=e;a.$comment&&r.$comment&&d(e);(function(e){e.schema.$id&&(e.baseId=o.resolveUrl(e.baseId,e.schema.$id))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const c=i.const("_errs",s.default.errors);h(e,c),i.var(t,n._`${c} === ${s.default.errors}`)}(t,r):e.boolOrEmptySchema(t,r)},lt.schemaCxtHasRules=l,lt.checkStrictMode=p,lt}function Gt(){if(Lt)return ct;Lt=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.func=ct.setEvaluated=ct.evaluatedPropsToName=ct.mergeEvaluated=ct.eachItem=ct.unescapeJsonPointer=ct.escapeJsonPointer=ct.escapeFragment=ct.unescapeFragment=ct.schemaRefOrVal=ct.schemaHasRulesButRef=ct.schemaHasRules=ct.checkUnknownRules=ct.alwaysValidSchema=ct.toHash=void 0;const e=tt(),t=Vt();function r(e,r=e.schema){const{opts:n,self:s}=e;if(!n.strict)return;if("boolean"==typeof r)return;const o=s.RULES.keywords;for(const n in r)o[n]||t.checkStrictMode(e,`unknown keyword: "${n}"`)}function n(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function s(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function o(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function i({mergeNames:t,mergeToName:r,mergeValues:n,resultToName:s}){return(o,i,a,c)=>{const l=void 0===a?i:a instanceof e.Name?(i instanceof e.Name?t(o,i,a):r(o,i,a),a):i instanceof e.Name?(r(o,a,i),i):n(i,a);return c!==e.Name||l instanceof e.Name?l:s(o,l)}}function a(t,r){if(!0===r)return t.var("props",!0);const n=t.var("props",e._`{}`);return void 0!==r&&c(t,n,r),n}function c(t,r,n){Object.keys(n).forEach((n=>t.assign(e._`${r}${e.getProperty(n)}`,!0)))}return ct.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},ct.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(r(e,t),!n(t,e.self.RULES.all))},ct.checkUnknownRules=r,ct.schemaHasRules=n,ct.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},ct.schemaRefOrVal=function({topSchemaRef:t,schemaPath:r},n,s,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return e._`${n}`}return e._`${t}${r}${e.getProperty(s)}`},ct.unescapeFragment=function(e){return o(decodeURIComponent(e))},ct.escapeFragment=function(e){return encodeURIComponent(s(e))},ct.escapeJsonPointer=s,ct.unescapeJsonPointer=o,ct.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},ct.mergeEvaluated={props:i({mergeNames:(t,r,n)=>t.if(e._`${n} !== true && ${r} !== undefined`,(()=>{t.if(e._`${r} === true`,(()=>t.assign(n,!0)),(()=>t.assign(n,e._`${n} || {}`).code(e._`Object.assign(${n}, ${r})`)))})),mergeToName:(t,r,n)=>t.if(e._`${n} !== true`,(()=>{!0===r?t.assign(n,!0):(t.assign(n,e._`${n} || {}`),c(t,n,r))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:a}),items:i({mergeNames:(t,r,n)=>t.if(e._`${n} !== true && ${r} !== undefined`,(()=>t.assign(n,e._`${r} === true ? true : ${n} > ${r} ? ${n} : ${r}`))),mergeToName:(t,r,n)=>t.if(e._`${n} !== true`,(()=>t.assign(n,!0===r||e._`${n} > ${r} ? ${n} : ${r}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},ct.evaluatedPropsToName=a,ct.setEvaluated=c,ct.func=function(e,t){return e.scopeValue("func",{ref:t,code:t.code})},ct}function zt(){return jt||(jt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=Ge(),r=Be(),n=it(),s=tt(),o=Gt();var i;function a(e){const r=Array.isArray(e)?e:e?[e]:[];if(r.every(t.isJSONType))return r;throw new Error("type must be JSONType or JSONType[]: "+r.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(i=e.DataType||(e.DataType={})),e.getSchemaTypes=function(e){const t=a(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},e.getJSONTypes=a,e.coerceAndCheckDataType=function(e,t){const{gen:n,data:o,opts:a}=e,l=function(e,t){return t?e.filter((e=>c.has(e)||"array"===t&&"array"===e)):[]}(t,a.coerceTypes),f=t.length>0&&!(0===l.length&&1===t.length&&r.schemaHasRulesForType(e,t[0]));if(f){const r=u(t,o,a.strict,i.Wrong);n.if(r,(()=>{l.length?function(e,t,r){const{gen:n,data:o,opts:i}=e,a=n.let("dataType",s._`typeof ${o}`),l=n.let("coerced",s._`undefined`);"array"===i.coerceTypes&&n.if(s._`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,(()=>n.assign(o,s._`${o}[0]`).assign(a,s._`typeof ${o}`).if(u(t,o,i.strict),(()=>n.assign(l,o)))));n.if(s._`${l} !== undefined`);for(const e of r)(c.has(e)||"array"===e&&"array"===i.coerceTypes)&&f(e);function f(e){switch(e){case"string":return void n.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${o}`).elseIf(s._`${o} === null`).assign(l,s._`""`);case"number":return void n.elseIf(s._`${a} == "boolean" || ${o} === null
		              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(l,s._`+${o}`);case"integer":return void n.elseIf(s._`${a} === "boolean" || ${o} === null
		              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,s._`+${o}`);case"boolean":return void n.elseIf(s._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf(s._`${o} === "true" || ${o} === 1`).assign(l,!0);case"null":return n.elseIf(s._`${o} === "" || ${o} === 0 || ${o} === false`),void n.assign(l,null);case"array":n.elseIf(s._`${a} === "string" || ${a} === "number"
		              || ${a} === "boolean" || ${o} === null`).assign(l,s._`[${o}]`)}}n.else(),h(e),n.endIf(),n.if(s._`${l} !== undefined`,(()=>{n.assign(o,l),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(s._`${t} !== undefined`,(()=>e.assign(s._`${t}[${r}]`,n)))}(e,l)}))}(e,t,l):h(e)}))}return f};const c=new Set(["string","number","integer","boolean","null"]);function l(e,t,r,n=i.Correct){const o=n===i.Correct?s.operators.EQ:s.operators.NEQ;let a;switch(e){case"null":return s._`${t} ${o} null`;case"array":a=s._`Array.isArray(${t})`;break;case"object":a=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=c(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=c();break;default:return s._`typeof ${t} ${o} ${e}`}return n===i.Correct?a:s.not(a);function c(e=s.nil){return s.and(s._`typeof ${t} == "number"`,e,r?s._`isFinite(${t})`:s.nil)}}function u(e,t,r,n){if(1===e.length)return l(e[0],t,r,n);let i;const a=o.toHash(e);if(a.array&&a.object){const e=s._`typeof ${t} != "object"`;i=a.null?e:s._`!${t} || ${e}`,delete a.null,delete a.array,delete a.object}else i=s.nil;a.number&&delete a.integer;for(const e in a)i=s.and(i,l(e,t,r,n));return i}e.checkDataType=l,e.checkDataTypes=u;const f={message:({schema:e})=>s.str`should be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function h(e){const t=function(e){const{gen:t,data:r,schema:n}=e,s=o.schemaRefOrVal(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}(e);n.reportError(t,f)}e.reportTypeError=h}(Ue)),Ue}function qt(){if(Dt)return Fe;Dt=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getData=void 0;const e=zt(),t=Gt(),r=it(),n=tt(),s=ot(),o=wt();Fe.default=class{constructor(e,r,n){if(function({schema:e,opts:t,self:r},n,s){if(Array.isArray(n.keyword)?!n.keyword.includes(s):n.keyword!==s)throw new Error("ajv implementation error");const o=n.dependencies;if(null==o?void 0:o.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(n.validateSchema){if(!n.validateSchema(e[s])){const e="keyword value is invalid: "+r.errorsText(n.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}}(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=t.schemaRefOrVal(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",c(this.$data,e));else if(this.schemaCode=this.schemaValue,!function(e,t,r=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e))}(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:!1!==r.errors)&&(this.errsCount=e.gen.const("_errs",s.default.errors))}result(e,t,r){this.gen.if(n.not(e)),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.result(e,void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(n._`${t} !== undefined && (${n.or(this.invalid$data(),e)})`)}error(e){(e?r.reportExtraError:r.reportError)(this,this.def.error)}$dataError(){r.reportError(this,this.def.$dataError||r.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');r.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=n.nil){this.gen.block((()=>{this.check$data(e,r),t()}))}check$data(e=n.nil,t=n.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:o,def:i}=this;r.if(n.or(n._`${s} === undefined`,t)),e!==n.nil&&r.assign(e,!0),(o.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==n.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:s,def:o,it:i}=this;return n.or(function(){if(s.length){if(!(r instanceof n.Name))throw new Error("ajv implementation error");const t=Array.isArray(s)?s:[s];return n._`${e.checkDataTypes(t,r,i.opts.strict,e.DataType.Wrong)}`}return n.nil}(),function(){if(o.validateSchema){const e=t.scopeValue("validate$data",{ref:o.validateSchema});return n._`!${e}(${r})`}return n.nil}())}subschema(e,t){return o.applySubschema(this.it,e,t)}mergeEvaluated(e,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=t.mergeEvaluated.props(s,e.props,n.props,r)),!0!==n.items&&void 0!==e.items&&(n.items=t.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,t){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return s.if(t,(()=>this.mergeEvaluated(e,n.Name))),!0}};const i=/^\/(?:[^~]|~0|~1)*$/,a=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function c(e,{dataLevel:r,dataNames:o,dataPathArr:c}){let l,u;if(""===e)return s.default.rootData;if("/"===e[0]){if(!i.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);l=e,u=s.default.rootData}else{const t=a.exec(e);if(!t)throw new Error(`Invalid JSON-pointer: ${e}`);const n=+t[1];if(l=t[2],"#"===l){if(n>=r)throw new Error(d("property/index",n));return c[r-n]}if(n>r)throw new Error(d("data",n));if(u=o[r-n],!l)return u}let f=u;const h=l.split("/");for(const e of h)e&&(u=n._`${u}${n.getProperty(t.unescapeJsonPointer(e))}`,f=n._`${f} && ${u}`);return f;function d(e,t){return`Cannot access ${e} ${t} levels up, current level is ${r}`}}return Fe.getData=c,Fe}var Bt,Ht={},Wt={exports:{}};function Xt(){return Bt||(Bt=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=void 0;const r=Ut();class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.ValidationError=n;class s extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=r.resolveUrl(e,t),this.missingSchema=r.normalizeId(r.getFullPath(this.missingRef))}}t.MissingRefError=s,e.exports={ValidationError:n,MissingRefError:s}}(Wt,Wt.exports)),Wt.exports}var Kt,Yt={};function Jt(){if(Kt)return Yt;Kt=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.resolveSchema=Yt.getCompilingSchema=Yt.resolveRef=Yt.compileSchema=Yt.SchemaEnv=void 0;const e=tt(),t=Xt(),r=ot(),n=Ut(),s=Gt(),o=Vt(),i=Ft();class a{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:n.normalizeId(null==r?void 0:r.$id),this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function c(s){const i=u.call(this,s);if(i)return i;const a=n.getFullPath(s.root.baseId),{es5:c,lines:l}=this.opts.code,{ownProperties:f}=this.opts,h=new e.CodeGen(this.scope,{es5:c,lines:l,ownProperties:f});let d;s.$async&&(d=h.scopeValue("Error",{ref:t.ValidationError,code:e._`require("ajv/dist/compile/error_classes").ValidationError`}));const p=h.scopeName("validate");s.validateName=p;const m={gen:h,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:s.schema,code:e.stringify(s.schema)}:{ref:s.schema}),validateName:p,ValidationError:d,schema:s.schema,schemaEnv:s,rootId:a,baseId:s.baseId||a,schemaPath:e.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:e._`""`,opts:this.opts,self:this};let y;try{this._compilations.add(s),o.validateFunctionCode(m),h.optimize(this.opts.code.optimize);const t=h.toString();y=`${h.scopeRefs(r.default.scope)}return ${t}`,this.opts.code.process&&(y=this.opts.code.process(y,s));const n=new Function(`${r.default.self}`,`${r.default.scope}`,y)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=s.schema,n.schemaEnv=s,s.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:t,items:r}=m;n.evaluated={props:t instanceof e.Name?void 0:t,items:r instanceof e.Name?void 0:r,dynamicProps:t instanceof e.Name,dynamicItems:r instanceof e.Name},n.source&&(n.source.evaluated=e.stringify(n.evaluated))}return s.validate=n,s}catch(e){throw delete s.validate,delete s.validateName,y&&this.logger.error("Error compiling schema, function code:",y),e}finally{this._compilations.delete(s)}}function l(e){return n.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:c.call(this,e)}function u(e){for(const n of this._compilations)if(r=e,(t=n).schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return n;var t,r}function f(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||h.call(this,e,t)}function h(e,t){const r=i.parse(t),s=n._getFullPath(r);let o=n.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&s===o)return p.call(this,r,e);const l=n.normalizeId(s),u=this.refs[l]||this.schemas[l];if("string"==typeof u){const t=h.call(this,e,u);if("object"!=typeof(null==t?void 0:t.schema))return;return p.call(this,r,t)}if("object"==typeof(null==u?void 0:u.schema)){if(u.validate||c.call(this,u),l===n.normalizeId(t)){const{schema:t}=u;return t.$id&&(o=n.resolveUrl(o,t.$id)),new a({schema:t,root:e,baseId:o})}return p.call(this,r,u)}}Yt.SchemaEnv=a,Yt.compileSchema=c,Yt.resolveRef=function(e,t,r){var s;r=n.resolveUrl(t,r);const o=e.refs[r];if(o)return o;let i=f.call(this,e,r);if(void 0===i){const n=null===(s=e.localRefs)||void 0===s?void 0:s[r];n&&(i=new a({schema:n,root:e,baseId:t}))}return void 0!==i?e.refs[r]=l.call(this,i):void 0},Yt.getCompilingSchema=u,Yt.resolveSchema=h;const d=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function p(e,{baseId:t,schema:r,root:o}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const o of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;if(void 0===(r=r[s.unescapeFragment(o)]))return;!d.has(o)&&"object"==typeof r&&r.$id&&(t=n.resolveUrl(t,r.$id))}let c;if("boolean"!=typeof r&&r.$ref&&!s.schemaHasRulesButRef(r,this.RULES)){const e=n.resolveUrl(t,r.$ref);c=h.call(this,o,e)}return c=c||new a({schema:r,root:o,baseId:t}),c.schema!==c.root.schema?c:void 0}return Yt}var Zt,Qt={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};function er(){return Zt||(Zt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const t=qt();e.KeywordCxt=t.default;var r=tt();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Xt(),s=Ge(),o=Jt(),i=tt(),a=Ut(),c=zt(),l=Gt(),u=Qt,f=["removeAdditional","useDefaults","coerceTypes"],h=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),d={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function m(e){var t,r,n,s,o,i,a,c,l,u,f,h;const d=null===(t=e.strict)||void 0===t||t,p=!!d&&"log",m=null===(r=e.code)||void 0===r?void 0:r.optimize,y=!0===m||void 0===m?1:m||0;return{strict:d,strictTypes:null!==(n=e.strictTypes)&&void 0!==n?n:p,strictTuples:null!==(s=e.strictTuples)&&void 0!==s?s:p,code:e.code?{...e.code,optimize:y}:{optimize:y},loopRequired:null!==(o=e.loopRequired)&&void 0!==o?o:1/0,loopEnum:null!==(i=e.loopEnum)&&void 0!==i?i:1/0,meta:null===(a=e.meta)||void 0===a||a,messages:null===(c=e.messages)||void 0===c||c,inlineRefs:null===(l=e.inlineRefs)||void 0===l||l,addUsedSchema:null===(u=e.addUsedSchema)||void 0===u||u,validateSchema:null===(f=e.validateSchema)||void 0===f||f,validateFormats:null===(h=e.validateFormats)||void 0===h||h}}class y{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...m(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:h,es5:t,lines:r}),this.logger=function(e){if(!1===e)return b;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=s.getRules(),v.call(this,d,e,"NOT SUPPORTED"),v.call(this,p,e,"DEPRECATED","warn"),this._metaOpts=$.call(this),e.formats&&_.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&w.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t}=this.opts;t&&e&&this.addMetaSchema(u,u.$id,!1)}defaultMeta(){const{meta:e}=this.opts;return this.opts.defaultMeta="object"==typeof e?e.$id||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return s.call(this,e,t);async function s(e,t){await o.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function o(e){e&&!this.getSchema(e)&&await s.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof n.MissingRefError))throw t;return a.call(this,t),await c.call(this,t.missingSchema),i.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const r=await l.call(this,e);this.refs[e]||await o.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let s;if("object"==typeof e&&(s=e.$id,void 0!==s&&"string"!=typeof s))throw new Error("schema id must be string");return t=a.normalizeId(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=g.call(this,e));)e=t;if(void 0===t){const r=new o.SchemaEnv({schema:{}});if(t=o.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=g.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e.$id;return r&&(r=a.normalizeId(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(N.call(this,r,t),!t)return l.eachItem(r,(e=>O.call(this,e))),this;R.call(this,t);const n={...t,type:c.getJSONTypes(t.type),schemaType:c.getJSONTypes(t.schemaType)};return l.eachItem(r,0===n.type.length?e=>O.call(this,e,n):e=>n.type.forEach((t=>O.call(this,e,n,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex((t=>t.keyword===e));t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map((e=>`${r}${e.dataPath} ${e.message}`)).reduce(((e,r)=>e+t+r)):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,o=s[e];n&&o&&(s[e]=T(o))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r=this.opts.validateSchema,n=this.opts.addUsedSchema){if("object"!=typeof e){if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let s=this._cache.get(e);if(void 0!==s)return s;const i=a.getSchemaRefs.call(this,e);s=new o.SchemaEnv({schema:e,meta:t,localRefs:i}),this._cache.set(s.schema,s);const c=s.baseId;return n&&!c.startsWith("#")&&(c&&this._checkUnique(c),this.refs[c]=s),r&&this.validateSchema(e,!0),s}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):o.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,e)}finally{this.opts=t}}}function v(e,t,r,n="error"){for(const s in e){const o=s;o in t&&this.logger[n](`${r}: option ${s}. ${e[o]}`)}}function g(e){return e=a.normalizeId(e),this.schemas[e]||this.refs[e]}function E(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function _(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function w(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function $(){const e={...this.opts};for(const t of f)delete e[t];return e}e.default=y,y.ValidationError=n.ValidationError,y.MissingRefError=n.MissingRefError;const b={log(){},warn(){},error(){}};const S=/^[a-z_$][a-z0-9_$:-]*$/i;function N(e,t){const{RULES:r}=this;if(l.eachItem(e,(e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!S.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function O(e,t,r){var n;const s=null==t?void 0:t.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let i=s?o.post:o.rules.find((({type:e})=>e===r));if(i||(i={type:r,rules:[]},o.rules.push(i)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:c.getJSONTypes(t.type),schemaType:c.getJSONTypes(t.schemaType)}};t.before?I.call(this,i,a,t.before):i.rules.push(a),o.all[e]=a,null===(n=t.implements)||void 0===n||n.forEach((e=>this.addKeyword(e)))}function I(e,t,r){const n=e.rules.findIndex((e=>e.keyword===r));n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function R(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=T(t)),e.validateSchema=this.compile(t,!0))}const P={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function T(e){return{anyOf:[e,P]}}}(Ht)),Ht}var tr,rr={},nr={},sr={};var or,ir,ar={};function cr(){if(ir)return nr;ir=1,Object.defineProperty(nr,"__esModule",{value:!0});const e=function(){if(tr)return sr;tr=1,Object.defineProperty(sr,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return sr.default=e,sr}(),t=function(){if(or)return ar;or=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.callRef=ar.getValidate=void 0;const e=Xt(),t=$t(),r=tt(),n=ot(),s=Jt(),o=Gt(),i={keyword:"$ref",schemaType:"string",code(t){const{gen:n,schema:o,it:i}=t,{baseId:l,schemaEnv:u,validateName:f,opts:h,self:d}=i;if("#"===o||"#/"===o)return function(){if(u===u.root)return c(t,f,u,u.$async);const e=n.scopeValue("root",{ref:u.root});return c(t,r._`${e}.validate`,u.root,u.root.$async)}();const p=s.resolveRef.call(d,u.root,l,o);if(void 0===p)throw new e.MissingRefError(l,o);return p instanceof s.SchemaEnv?function(e){const r=a(t,e);c(t,r,e,e.$async)}(p):function(e){const s=n.scopeValue("schema",!0===h.code.source?{ref:e,code:r.stringify(e)}:{ref:e}),i=n.name("valid"),a=t.subschema({schema:e,dataTypes:[],schemaPath:r.nil,topSchemaRef:s,errSchemaPath:o},i);t.mergeEvaluated(a),t.ok(i)}(p)}};function a(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):r._`${n.scopeValue("wrapper",{ref:t})}.validate`}function c(e,s,i,a){const{gen:c,it:l}=e,{allErrors:u,schemaEnv:f,opts:h}=l,d=h.passContext?n.default.this:r.nil;function p(e){const t=r._`${e}.errors`;c.assign(n.default.vErrors,r._`${n.default.vErrors} === null ? ${t} : ${n.default.vErrors}.concat(${t})`),c.assign(n.default.errors,r._`${n.default.vErrors}.length`)}function m(e){var t;if(!l.opts.unevaluated)return;const n=null===(t=null==i?void 0:i.validate)||void 0===t?void 0:t.evaluated;if(!0!==l.props)if(n&&!n.dynamicProps)void 0!==n.props&&(l.props=o.mergeEvaluated.props(c,n.props,l.props));else{const t=c.var("props",r._`${e}.evaluated.props`);l.props=o.mergeEvaluated.props(c,t,l.props,r.Name)}if(!0!==l.items)if(n&&!n.dynamicItems)void 0!==n.items&&(l.items=o.mergeEvaluated.items(c,n.items,l.items));else{const t=c.var("items",r._`${e}.evaluated.items`);l.items=o.mergeEvaluated.items(c,t,l.items,r.Name)}}a?function(){if(!f.$async)throw new Error("async schema referenced by sync schema");const n=c.let("valid");c.try((()=>{c.code(r._`await ${t.callValidateCode(e,s,d)}`),m(s),u||c.assign(n,!0)}),(e=>{c.if(r._`!(${e} instanceof ${l.ValidationError})`,(()=>c.throw(e))),p(e),u||c.assign(n,!1)})),e.ok(n)}():e.result(t.callValidateCode(e,s,d),(()=>m(s)),(()=>p(s)))}return ar.getValidate=a,ar.callRef=c,ar.default=i,ar}(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return nr.default=r,nr}var lr,ur={},fr={};var hr,dr={};var pr,mr,yr={},vr={};function gr(){if(mr)return yr;mr=1,Object.defineProperty(yr,"__esModule",{value:!0});const e=tt(),t=(pr||(pr=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.default=function(e){const t=e.length;let r,n=0,s=0;for(;s<t;)n++,r=e.charCodeAt(s++),r>=55296&&r<=56319&&s<t&&(r=e.charCodeAt(s),56320==(64512&r)&&s++);return n}),vr),r={message({keyword:t,schemaCode:r}){const n="maxLength"===t?"more":"fewer";return e.str`should NOT have ${n} than ${r} characters`},params:({schemaCode:t})=>e._`{limit: ${t}}`},n={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:r,code(r){const{keyword:n,data:s,schemaCode:o,it:i}=r,a="maxLength"===n?e.operators.GT:e.operators.LT;let c;if(!1===i.opts.unicode)c=e._`${s}.length`;else{const n=r.gen.scopeValue("func",{ref:t.default,code:e._`require("ajv/dist/compile/ucs2length").default`});c=e._`${n}(${s})`}r.fail$data(e._`${c} ${a} ${o}`)}};return yr.default=n,yr}var Er,_r={};var wr,$r={};var br,Sr={};function Nr(){if(br)return Sr;br=1,Object.defineProperty(Sr,"__esModule",{value:!0});const e=$t(),t=tt(),r=Vt(),n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>t.str`should have required property '${e}'`,params:({params:{missingProperty:e}})=>t._`{missingProperty: ${e}}`},code(n){const{gen:s,schema:o,schemaCode:i,data:a,$data:c,it:l}=n,{opts:u}=l;if(!c&&0===o.length)return;const f=o.length>=u.loopRequired;if(l.allErrors?function(){if(f||c)n.block$data(t.nil,h);else for(const t of o)e.checkReportMissingProp(n,t)}():function(){const r=s.let("missing");if(f||c){const o=s.let("valid",!0);n.block$data(o,(()=>function(r,o){n.setParams({missingProperty:r}),s.forOf(r,i,(()=>{s.assign(o,e.propertyInData(s,a,r,u.ownProperties)),s.if(t.not(o),(()=>{n.error(),s.break()}))}),t.nil)}(r,o))),n.ok(o)}else s.if(e.checkMissingProp(n,o,r)),e.reportMissingProp(n,r),s.else()}(),u.strictRequired){const e=n.parentSchema.properties,{definedProperties:t}=n.it;for(const n of o)if(void 0===(null==e?void 0:e[n])&&!t.has(n)){const e=`required property "${n}" is not defined at "${l.schemaEnv.baseId+l.errSchemaPath}" (strictRequired)`;r.checkStrictMode(l,e,l.opts.strictRequired)}}function h(){s.forOf("prop",i,(t=>{n.setParams({missingProperty:t}),s.if(e.noPropertyInData(s,a,t,u.ownProperties),(()=>n.error()))}))}}};return Sr.default=n,Sr}var Or,Ir={};var Rr,Pr={};function Tr(){if(Rr)return Pr;Rr=1,Object.defineProperty(Pr,"__esModule",{value:!0});const e=zt(),t=tt(),r=Rt(),n={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:r}})=>t.str`should NOT have duplicate items (items ## ${r} and ${e} are identical)`,params:({params:{i:e,j:r}})=>t._`{i: ${e}, j: ${r}}`},code(n){const{gen:s,data:o,$data:i,schema:a,parentSchema:c,schemaCode:l,it:u}=n;if(!i&&!a)return;const f=s.let("valid"),h=c.items?e.getSchemaTypes(c.items):[];function d(r,i){const a=s.name("item"),c=e.checkDataTypes(h,a,u.opts.strict,e.DataType.Wrong),l=s.const("indices",t._`{}`);s.for(t._`;${r}--;`,(()=>{s.let(a,t._`${o}[${r}]`),s.if(c,t._`continue`),h.length>1&&s.if(t._`typeof ${a} == "string"`,t._`${a} += "_"`),s.if(t._`typeof ${l}[${a}] == "number"`,(()=>{s.assign(i,t._`${l}[${a}]`),n.error(),s.assign(f,!1).break()})).code(t._`${l}[${a}] = ${r}`)}))}function p(e,i){const a=n.gen.scopeValue("func",{ref:r,code:t._`require("ajv/dist/compile/equal")`}),c=s.name("outer");s.label(c).for(t._`;${e}--;`,(()=>s.for(t._`${i} = ${e}; ${i}--;`,(()=>s.if(t._`${a}(${o}[${e}], ${o}[${i}])`,(()=>{n.error(),s.assign(f,!1).break(c)}))))))}n.block$data(f,(function(){const e=s.let("i",t._`${o}.length`),r=s.let("j");n.setParams({i:e,j:r}),s.assign(f,!0),s.if(t._`${e} > 1`,(()=>(h.length>0&&!h.some((e=>"object"===e||"array"===e))?d:p)(e,r)))}),t._`${l} === false`),n.ok(f)}};return Pr.default=n,Pr}var Ar,kr={};var xr,Cr,Lr={};function jr(){if(xr)return Lr;xr=1,Object.defineProperty(Lr,"__esModule",{value:!0});const e=tt(),t=Rt(),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:t})=>e._`{allowedValues: ${t}}`},code(r){const{gen:n,data:s,$data:o,schema:i,schemaCode:a,it:c}=r;if(!o&&0===i.length)throw new Error("enum must have non-empty array");const l=i.length>=c.opts.loopEnum,u=r.gen.scopeValue("func",{ref:t,code:e._`require("ajv/dist/compile/equal")`});let f;if(l||o)f=n.let("valid"),r.block$data(f,(function(){n.assign(f,!1),n.forOf("v",a,(t=>n.if(e._`${u}(${s}, ${t})`,(()=>n.assign(f,!0).break()))))}));else{if(!Array.isArray(i))throw new Error("ajv implementation error");const t=n.const("vSchema",a);f=e.or(...i.map(((r,n)=>function(t,r){const n=i[r];return n&&"object"==typeof n?e._`${u}(${s}, ${t}[${r}])`:e._`${s} === ${n}`}(t,n))))}r.pass(f)}};return Lr.default=r,Lr}function Dr(){if(Cr)return ur;Cr=1,Object.defineProperty(ur,"__esModule",{value:!0});const e=function(){if(lr)return fr;lr=1,Object.defineProperty(fr,"__esModule",{value:!0});const e=tt(),t=e.operators,r={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},n={message:({keyword:t,schemaCode:n})=>e.str`should be ${r[t].okStr} ${n}`,params:({keyword:t,schemaCode:n})=>e._`{comparison: ${r[t].okStr}, limit: ${n}}`},s={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(t){const{keyword:n,data:s,schemaCode:o}=t;t.fail$data(e._`${s} ${r[n].fail} ${o} || isNaN(${s})`)}};return fr.default=s,fr}(),t=function(){if(hr)return dr;hr=1,Object.defineProperty(dr,"__esModule",{value:!0});const e=tt(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:t})=>e.str`should be multiple of ${t}`,params:({schemaCode:t})=>e._`{multipleOf: ${t}}`},code(t){const{gen:r,data:n,schemaCode:s,it:o}=t,i=o.opts.multipleOfPrecision,a=r.let("res"),c=i?e._`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:e._`${a} !== parseInt(${a})`;t.fail$data(e._`(${s} === 0 || (${a} = ${n}/${s}, ${c}))`)}};return dr.default=t,dr}(),r=gr(),n=function(){if(Er)return _r;Er=1,Object.defineProperty(_r,"__esModule",{value:!0});const e=$t(),t=tt(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>t.str`should match pattern "${e}"`,params:({schemaCode:e})=>t._`{pattern: ${e}}`},code(r){const{gen:n,data:s,$data:o,schema:i,schemaCode:a}=r,c=o?t._`(new RegExp(${a}, "u"))`:e.usePattern(n,i);r.fail$data(t._`!${c}.test(${s})`)}};return _r.default=r,_r}(),s=function(){if(wr)return $r;wr=1,Object.defineProperty($r,"__esModule",{value:!0});const e=tt(),t={message({keyword:t,schemaCode:r}){const n="maxProperties"===t?"more":"fewer";return e.str`should NOT have ${n} than ${r} items`},params:({schemaCode:t})=>e._`{limit: ${t}}`},r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:t,code(t){const{keyword:r,data:n,schemaCode:s}=t,o="maxProperties"===r?e.operators.GT:e.operators.LT;t.fail$data(e._`Object.keys(${n}).length ${o} ${s}`)}};return $r.default=r,$r}(),o=Nr(),i=function(){if(Or)return Ir;Or=1,Object.defineProperty(Ir,"__esModule",{value:!0});const e=tt(),t={message({keyword:t,schemaCode:r}){const n="maxItems"===t?"more":"fewer";return e.str`should NOT have ${n} than ${r} items`},params:({schemaCode:t})=>e._`{limit: ${t}}`},r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:t,code(t){const{keyword:r,data:n,schemaCode:s}=t,o="maxItems"===r?e.operators.GT:e.operators.LT;t.fail$data(e._`${n}.length ${o} ${s}`)}};return Ir.default=r,Ir}(),a=Tr(),c=function(){if(Ar)return kr;Ar=1,Object.defineProperty(kr,"__esModule",{value:!0});const e=tt(),t=Rt(),r={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:t})=>e._`{allowedValue: ${t}}`},code(r){const n=r.gen.scopeValue("func",{ref:t,code:e._`require("ajv/dist/compile/equal")`});r.fail$data(e._`!${n}(${r.data}, ${r.schemaCode})`)}};return kr.default=r,kr}(),l=jr(),u=[e.default,t.default,r.default,n.default,s.default,o.default,i.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,l.default];return ur.default=u,ur}var Mr,Fr={},Ur={};function Vr(){if(Mr)return Ur;Mr=1,Object.defineProperty(Ur,"__esModule",{value:!0});const e=tt(),t=wt(),r=Gt(),n=Vt(),s={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:t}})=>e.str`should NOT have more than ${t} items`,params:({params:{len:t}})=>e._`{limit: ${t}}`},code(s){const{gen:o,schema:i,parentSchema:a,data:c,it:l}=s,{items:u}=a;if(!Array.isArray(u))return void n.checkStrictMode(l,'"additionalItems" is ignored when "items" is not an array of schemas');l.items=!0;const f=o.const("len",e._`${c}.length`);if(!1===i)s.setParams({len:u.length}),s.pass(e._`${f} <= ${u.length}`);else if("object"==typeof i&&!r.alwaysValidSchema(l,i)){const r=o.var("valid",e._`${f} <= ${u.length}`);o.if(e.not(r),(()=>function(r){o.forRange("i",u.length,f,(n=>{s.subschema({keyword:"additionalItems",dataProp:n,dataPropType:t.Type.Num},r),l.allErrors||o.if(e.not(r),(()=>o.break()))}))}(r))),s.ok(r)}}};return Ur.default=s,Ur}var Gr,zr={};var qr,Br={};function Hr(){if(qr)return Br;qr=1,Object.defineProperty(Br,"__esModule",{value:!0});const e=tt(),t=wt(),r=Gt(),n=Vt(),s={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:t,max:r}})=>void 0===r?e.str`should contain at least ${t} valid item(s)`:e.str`should contain at least ${t} and no more than ${r} valid item(s)`,params:({params:{min:t,max:r}})=>void 0===r?e._`{minContains: ${t}}`:e._`{minContains: ${t}, maxContains: ${r}}`},code(s){const{gen:o,schema:i,parentSchema:a,data:c,it:l}=s;let u,f;const{minContains:h,maxContains:d}=a;l.opts.next?(u=void 0===h?1:h,f=d):u=1;const p=o.const("len",e._`${c}.length`);if(s.setParams({min:u,max:f}),void 0===f&&0===u)return void n.checkStrictMode(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==f&&u>f)return n.checkStrictMode(l,'"minContains" > "maxContains" is always invalid'),void s.fail();if(r.alwaysValidSchema(l,i)){let t=e._`${p} >= ${u}`;return void 0!==f&&(t=e._`${t} && ${p} <= ${f}`),void s.pass(t)}l.items=!0;const m=o.name("valid");if(void 0===f&&1===u)y(m,(()=>o.if(m,(()=>o.break()))));else{o.let(m,!1);const t=o.name("_valid"),r=o.let("count",0);y(t,(()=>o.if(t,(()=>function(t){o.code(e._`${t}++`),void 0===f?o.if(e._`${t} >= ${u}`,(()=>o.assign(m,!0).break())):(o.if(e._`${t} > ${f}`,(()=>o.assign(m,!1).break())),1===u?o.assign(m,!0):o.if(e._`${t} >= ${u}`,(()=>o.assign(m,!0))))}(r)))))}function y(e,r){o.forRange("i",0,p,(n=>{s.subschema({keyword:"contains",dataProp:n,dataPropType:t.Type.Num,compositeRule:!0},e),r()}))}s.result(m,(()=>s.reset()))}};return Br.default=s,Br}var Wr,Xr={};function Kr(){return Wr||(Wr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=tt(),r=Gt(),n=$t();e.error={message:({params:{property:e,depsCount:r,deps:n}})=>{const s=1===r?"property":"properties";return t.str`should have ${s} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:r,deps:n,missingProperty:s}})=>t._`{property: ${e},
		    missingProperty: ${s},
		    depsCount: ${r},
		    deps: ${n}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e){if("__proto__"===n)continue;(Array.isArray(e[n])?t:r)[n]=e[n]}return[t,r]}(e);o(e,t),i(e,r)}};function o(e,r=e.schema){const{gen:s,data:o,it:i}=e;if(0===Object.keys(r).length)return;const a=s.let("missing");for(const c in r){const l=r[c];if(0===l.length)continue;const u=n.propertyInData(s,o,c,i.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),i.allErrors?s.if(u,(()=>{for(const t of l)n.checkReportMissingProp(e,t)})):(s.if(t._`${u} && (${n.checkMissingProp(e,l,a)})`),n.reportMissingProp(e,a),s.else())}}function i(e,t=e.schema){const{gen:s,data:o,keyword:i,it:a}=e,c=s.name("valid");for(const l in t)r.alwaysValidSchema(a,t[l])||(s.if(n.propertyInData(s,o,l,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:i,schemaProp:l},c);e.mergeValidEvaluated(t,c)}),(()=>s.var(c,!0))),e.ok(c))}e.validatePropertyDeps=o,e.validateSchemaDeps=i,e.default=s}(Xr)),Xr}var Yr,Jr={};var Zr,Qr={};function en(){if(Zr)return Qr;Zr=1,Object.defineProperty(Qr,"__esModule",{value:!0});const e=$t(),t=tt(),r=ot(),n=wt(),s=Gt(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:e})=>t._`{additionalProperty: ${e.additionalProperty}}`},code(o){const{gen:i,schema:a,parentSchema:c,data:l,errsCount:u,it:f}=o;if(!u)throw new Error("ajv implementation error");const{allErrors:h,opts:d}=f;if(f.props=!0,"all"!==d.removeAdditional&&s.alwaysValidSchema(f,a))return;const p=e.allSchemaProperties(c.properties),m=e.allSchemaProperties(c.patternProperties);function y(e){i.code(t._`delete ${l}[${e}]`)}function v(e){if("all"===d.removeAdditional||d.removeAdditional&&!1===a)y(e);else{if(!1===a)return o.setParams({additionalProperty:e}),o.error(),void(h||i.break());if("object"==typeof a&&!s.alwaysValidSchema(f,a)){const r=i.name("valid");"failing"===d.removeAdditional?(g(e,r,!1),i.if(t.not(r),(()=>{o.reset(),y(e)}))):(g(e,r),h||i.if(t.not(r),(()=>i.break())))}}}function g(e,t,r){const s={keyword:"additionalProperties",dataProp:e,dataPropType:n.Type.Str};!1===r&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(s,t)}i.forIn("key",l,(r=>{p.length||m.length?i.if(function(r){let n;if(p.length>8){const t=s.schemaRefOrVal(f,c.properties,"properties");n=e.isOwnProperty(i,t,r)}else n=p.length?t.or(...p.map((e=>t._`${r} === ${e}`))):t.nil;return m.length&&(n=t.or(n,...m.map((n=>t._`${e.usePattern(i,n)}.test(${r})`)))),t.not(n)}(r),(()=>v(r))):v(r)})),o.ok(t._`${u} === ${r.default.errors}`)}};return Qr.default=o,Qr}var tn,rn={};var nn,sn={};var on,an={};var cn,ln={};var un,fn={};var hn,dn={};var pn,mn={};var yn,vn,gn={};function En(){if(vn)return Fr;vn=1,Object.defineProperty(Fr,"__esModule",{value:!0});const e=Vr(),t=function(){if(Gr)return zr;Gr=1,Object.defineProperty(zr,"__esModule",{value:!0});const e=tt(),t=Gt(),r=Vt(),n=$t(),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{gen:o,schema:i,it:a}=s;if(Array.isArray(i))a.opts.unevaluated&&i.length&&!0!==a.items&&(a.items=t.mergeEvaluated.items(o,i.length,a.items)),function(n){const{parentSchema:i,data:c}=s;if(a.opts.strictTuples&&!function(e,t){return e===t.minItems&&(e===t.maxItems||!1===t.additionalItems)}(n.length,i)){const e=`"items" is ${n.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;r.checkStrictMode(a,e,a.opts.strictTuples)}const l=o.name("valid"),u=o.const("len",e._`${c}.length`);n.forEach(((r,n)=>{t.alwaysValidSchema(a,r)||(o.if(e._`${u} > ${n}`,(()=>s.subschema({keyword:"items",schemaProp:n,dataProp:n},l))),s.ok(l))}))}(i);else{if(a.items=!0,t.alwaysValidSchema(a,i))return;s.ok(n.validateArray(s))}}};return zr.default=s,zr}(),r=Hr(),n=Kr(),s=function(){if(Yr)return Jr;Yr=1,Object.defineProperty(Jr,"__esModule",{value:!0});const e=tt(),t=Gt(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:t})=>e.str`property name '${t.propertyName}' is invalid`,params:({params:t})=>e._`{propertyName: ${t.propertyName}}`},code(r){const{gen:n,schema:s,data:o,it:i}=r;if(t.alwaysValidSchema(i,s))return;const a=n.name("valid");n.forIn("key",o,(t=>{r.setParams({propertyName:t}),r.subschema({keyword:"propertyNames",data:t,dataTypes:["string"],propertyName:t,compositeRule:!0},a),n.if(e.not(a),(()=>{r.error(!0),i.allErrors||n.break()}))})),r.ok(a)}};return Jr.default=r,Jr}(),o=en(),i=function(){if(tn)return rn;tn=1,Object.defineProperty(rn,"__esModule",{value:!0});const e=qt(),t=$t(),r=Gt(),n=en(),s={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:i,parentSchema:a,data:c,it:l}=s;"all"===l.opts.removeAdditional&&void 0===a.additionalProperties&&n.default.code(new e.default(l,n.default,"additionalProperties"));const u=t.allSchemaProperties(i);for(const e of u)l.definedProperties.add(e);l.opts.unevaluated&&u.length&&!0!==l.props&&(l.props=r.mergeEvaluated.props(o,r.toHash(u),l.props));const f=u.filter((e=>!r.alwaysValidSchema(l,i[e])));if(0===f.length)return;const h=o.name("valid");for(const e of f)d(e)?p(e):(o.if(t.propertyInData(o,c,e,l.opts.ownProperties)),p(e),l.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(e),s.ok(h);function d(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==i[e].default}function p(e){s.subschema({keyword:"properties",schemaProp:e,dataProp:e},h)}}};return rn.default=s,rn}(),a=function(){if(nn)return sn;nn=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=$t(),t=tt(),r=wt(),n=Vt(),s=Gt(),o={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:i,schema:a,data:c,parentSchema:l,it:u}=o,{opts:f}=u,h=e.schemaProperties(u,a);if(0===h.length)return;const d=f.strict&&!f.allowMatchingProperties&&l.properties,p=i.name("valid");!0===u.props||u.props instanceof t.Name||(u.props=s.evaluatedPropsToName(i,u.props));const{props:m}=u;function y(e){for(const t in d)new RegExp(e).test(t)&&n.checkStrictMode(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){i.forIn("key",c,(s=>{i.if(t._`${e.usePattern(i,n)}.test(${s})`,(()=>{o.subschema({keyword:"patternProperties",schemaProp:n,dataProp:s,dataPropType:r.Type.Str},p),u.opts.unevaluated&&!0!==m?i.assign(t._`${m}[${s}]`,!0):u.allErrors||i.if(t.not(p),(()=>i.break()))}))}))}!function(){for(const e of h)d&&y(e),u.allErrors?v(e):(i.var(p,!0),v(e),i.if(p))}()}};return sn.default=o,sn}(),c=function(){if(on)return an;on=1,Object.defineProperty(an,"__esModule",{value:!0});const e=Gt(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:r,schema:n,it:s}=t;if(e.alwaysValidSchema(s,n))return void t.fail();const o=r.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.result(o,(()=>t.error()),(()=>t.reset()))},error:{message:"should NOT be valid"}};return an.default=t,an}(),l=function(){if(cn)return ln;cn=1,Object.defineProperty(ln,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:$t().validateUnion,error:{message:"should match some schema in anyOf"}};return ln.default=e,ln}(),u=function(){if(un)return fn;un=1,Object.defineProperty(fn,"__esModule",{value:!0});const e=tt(),t=Gt(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:t})=>e._`{passingSchemas: ${t.passing}}`},code(r){const{gen:n,schema:s,it:o}=r;if(!Array.isArray(s))throw new Error("ajv implementation error");const i=s,a=n.let("valid",!1),c=n.let("passing",null),l=n.name("_valid");r.setParams({passing:c}),n.block((function(){i.forEach(((s,i)=>{let u;t.alwaysValidSchema(o,s)?n.var(l,!0):u=r.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},l),i>0&&n.if(e._`${l} && ${a}`).assign(a,!1).assign(c,e._`[${c}, ${i}]`).else(),n.if(l,(()=>{n.assign(a,!0),n.assign(c,i),u&&r.mergeEvaluated(u,e.Name)}))}))})),r.result(a,(()=>r.reset()),(()=>r.error(!0)))}};return fn.default=r,fn}(),f=function(){if(hn)return dn;hn=1,Object.defineProperty(dn,"__esModule",{value:!0});const e=Gt(),t={keyword:"allOf",schemaType:"array",code(t){const{gen:r,schema:n,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=r.name("valid");n.forEach(((r,n)=>{if(e.alwaysValidSchema(s,r))return;const i=t.subschema({keyword:"allOf",schemaProp:n},o);t.ok(o),t.mergeEvaluated(i)}))}};return dn.default=t,dn}(),h=function(){if(pn)return mn;pn=1,Object.defineProperty(mn,"__esModule",{value:!0});const e=tt(),t=Gt(),r=Vt(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:t})=>e.str`should match "${t.ifClause}" schema`,params:({params:t})=>e._`{failingKeyword: ${t.ifClause}}`},code(t){const{gen:n,parentSchema:o,it:i}=t;void 0===o.then&&void 0===o.else&&r.checkStrictMode(i,'"if" without "then" and "else" is ignored');const a=s(i,"then"),c=s(i,"else");if(!a&&!c)return;const l=n.let("valid",!0),u=n.name("_valid");if(function(){const e=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);t.mergeEvaluated(e)}(),t.reset(),a&&c){const e=n.let("ifClause");t.setParams({ifClause:e}),n.if(u,f("then",e),f("else",e))}else a?n.if(u,f("then")):n.if(e.not(u),f("else"));function f(r,s){return()=>{const o=t.subschema({keyword:r},u);n.assign(l,u),t.mergeValidEvaluated(o,l),s?n.assign(s,e._`${r}`):t.setParams({ifClause:r})}}t.pass(l,(()=>t.error(!0)))}};function s(e,r){const n=e.schema[r];return void 0!==n&&!t.alwaysValidSchema(e,n)}return mn.default=n,mn}(),d=function(){if(yn)return gn;yn=1,Object.defineProperty(gn,"__esModule",{value:!0});const e=Vt(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:r,it:n}){void 0===r.if&&e.checkStrictMode(n,`"${t}" without "if" is ignored`)}};return gn.default=t,gn}(),p=[c.default,l.default,u.default,f.default,h.default,d.default,e.default,t.default,r.default,s.default,o.default,n.default,i.default,a.default];return Fr.default=p,Fr}var _n,wn,$n={},bn={};function Sn(){if(_n)return bn;_n=1,Object.defineProperty(bn,"__esModule",{value:!0});const e=tt(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:t})=>e.str`should match format "${t}"`,params:({schemaCode:t})=>e._`{format: ${t}}`},code(t,r){const{gen:n,data:s,$data:o,schema:i,schemaCode:a,it:c}=t,{opts:l,errSchemaPath:u,schemaEnv:f,self:h}=c;l.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:h.formats,code:l.code.formats}),i=n.const("fDef",e._`${o}[${a}]`),c=n.let("fType"),u=n.let("format");n.if(e._`typeof ${i} == "object" && !(${i} instanceof RegExp)`,(()=>n.assign(c,e._`${i}.type || "string"`).assign(u,e._`${i}.validate`)),(()=>n.assign(c,e._`"string"`).assign(u,i))),t.fail$data(e.or(!1===l.strict?e.nil:e._`${a} && !${u}`,function(){const t=f.$async?e._`(${i}.async ? await ${u}(${s}) : ${u}(${s}))`:e._`${u}(${s})`,n=e._`(typeof ${u} == "function" ? ${t} : ${u}.test(${s}))`;return e._`${u} && ${u} !== true && ${c} === ${r} && !${n}`}()))}():function(){const o=h.formats[i];if(!o)return void function(){if(!1===l.strict)return void h.logger.warn(e());throw new Error(e());function e(){return`unknown format "${i}" ignored in schema at path "${u}"`}}();if(!0===o)return;const[a,c,d]=function(t){const r=n.scopeValue("formats",{key:i,ref:t,code:l.code.formats?e._`${l.code.formats}${e.getProperty(i)}`:void 0});if("object"==typeof t&&!(t instanceof RegExp))return[t.type||"string",t.validate,e._`${r}.validate`];return["string",t,r]}(o);a===r&&t.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!f.$async)throw new Error("async format in sync schema");return e._`await ${d}(${s})`}return"function"==typeof c?e._`${d}(${s})`:e._`${d}.test(${s})`}())}())}};return bn.default=t,bn}var Nn,On,In={};function Rn(){if(On)return rr;On=1,Object.defineProperty(rr,"__esModule",{value:!0});const e=cr(),t=Dr(),r=En(),n=function(){if(wn)return $n;wn=1,Object.defineProperty($n,"__esModule",{value:!0});const e=[Sn().default];return $n.default=e,$n}(),s=(Nn||(Nn=1,Object.defineProperty(In,"__esModule",{value:!0}),In.contentVocabulary=In.metadataVocabulary=void 0,In.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],In.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),In),o=[e.default,t.default,r.default,n.default,s.metadataVocabulary,s.contentVocabulary];return rr.default=o,rr}var Pn,Tn={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var An,kn={exports:{}},xn={};var Cn,Ln,jn,Dn,Mn,Fn,Un={};function Vn(){return Ln||(Ln=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=(An||(An=1,function(e){function t(e,t){return{validate:e,compare:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:t(s,o),time:t(a,c),"date-time":t((function(e){const t=e.split(l);return 2===t.length&&s(t[0])&&a(t[1],!0)}),u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return f.test(e)&&h.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(d.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(e){const t=r.exec(e);if(!t)return!1;const s=+t[1],o=+t[2],i=+t[3];return o>=1&&o<=12&&i>=1&&i<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(s)?29:n[o])}function o(e,t){if(e&&t)return e>t?1:e<t?-1:0}const i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function a(e,t){const r=i.exec(e);if(!r)return!1;const n=+r[1],s=+r[2],o=+r[3],a=r[5];return(n<=23&&s<=59&&o<=59||23===n&&59===s&&60===o)&&(!t||""!==a)}function c(e,t){if(!e||!t)return;const r=i.exec(e),n=i.exec(t);return r&&n?(e=r[1]+r[2]+r[3]+(r[4]||""))>(t=n[1]+n[2]+n[3]+(n[4]||""))?1:e<t?-1:0:void 0}const l=/t|\s/i;function u(e,t){if(!e||!t)return;const[r,n]=e.split(l),[s,i]=t.split(l),a=o(r,s);return void 0!==a?a||c(n,i):void 0}const f=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,d=/[^\\]\\Z/}(xn)),xn),n=(Cn||(Cn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=qt(),r=tt(),n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:e,schemaCode:t})=>r.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${s[e].okStr}, limit: ${t}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(e){const{gen:n,data:o,schemaCode:i,keyword:a,it:c}=e,{opts:l,self:u}=c;if(!l.validateFormats)return;const f=new t.default(c,u.RULES.all.format.definition,"format");function h(e){return r._`${e}.compare(${o}, ${i}) ${s[a].fail} 0`}f.$data?function(){const t=n.scopeValue("formats",{ref:u.formats,code:l.code.formats}),s=n.const("fmt",r._`${t}[${f.schemaCode}]`);e.fail$data(r.or(r._`typeof ${s} != "object"`,r._`${s} instanceof RegExp`,r._`typeof ${s}.compare != "function"`,h(s)))}():function(){const t=f.schema,s=u.formats[t];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw new Error(`"${a}": format "${t}" does not define "compare" function`);const o=n.scopeValue("formats",{key:t,ref:s,code:l.code.formats?r._`${l.code.formats}${r.getProperty(t)}`:void 0});e.fail$data(h(o))}()},dependencies:["format"]},e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)}(Un)),Un),s=tt(),o=new s.Name("fullFormats"),i=new s.Name("fastFormats"),a=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,r.fullFormats,o),e;const[s,a]="fast"===t.mode?[r.fastFormats,i]:[r.fullFormats,o];return c(e,t.formats||r.formatNames,s,a),t.keywords&&n.default(e),e};function c(e,t,r,n){var o,i;null!==(o=(i=e.opts.code).formats)&&void 0!==o||(i.formats=s._`require("ajv-formats/dist/formats").${n}`);for(const n of t)e.addFormat(n,r[n])}a.get=(e,t="full")=>{const n=("fast"===t?r.fastFormats:r.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n},t.default=a,e.exports=a,e.exports.default=a}(kn,kn.exports)),kn.exports}function Gn(){if(Dn)return jn;Dn=1;const e=(e,r,n,s)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(r,n);!t(o,i)&&s||Object.defineProperty(e,n,i)},t=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},r=(e,t)=>`/* Wrapped ${e}*/\n${t}`,n=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),s=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");return jn=(t,o,{ignoreNonConfigurable:i=!1}={})=>{const{name:a}=t;for(const r of Reflect.ownKeys(o))e(t,o,r,i);return((e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)})(t,o),((e,t,o)=>{const i=""===o?"":`with ${o.trim()}() `,a=r.bind(null,i,t.toString());Object.defineProperty(a,"name",s),Object.defineProperty(e,"toString",{...n,value:a})})(t,o,a),t}}function zn(){if(Fn)return Mn;Fn=1;const e=Gn();return Mn=(t,r={})=>{if("function"!=typeof t)throw new TypeError(`Expected the first argument to be a function, got \`${typeof t}\``);const{wait:n=0,before:s=!1,after:o=!0}=r;if(!s&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let i,a;const c=function(...e){const r=this,c=s&&!i;return clearTimeout(i),i=setTimeout((()=>{i=void 0,o&&(a=t.apply(r,e))}),n),c&&(a=t.apply(r,e)),a};return e(c,t),c.cancel=()=>{i&&(clearTimeout(i),i=void 0)},c},Mn}var qn,Bn,Hn,Wn,Xn,Kn,Yn,Jn,Zn,Qn,es,ts,rs,ns,ss,os,is,as,cs,ls,us,fs,hs,ds,ps,ms,ys,vs,gs,Es,_s,ws,$s,bs,Ss,Ns,Os,Is,Rs,Ps,Ts,As,ks,xs,Cs,Ls,js,Ds,Ms,Fs,Us,Vs,Gs,zs,qs,Bs,Hs,Ws,Xs,Ks,Ys,Js,Zs,Qs,eo,to,ro,no,so,oo,io,ao,co,lo,uo,fo,ho,po,mo,yo,vo,go,Eo,_o,wo,$o,bo,So,No,Oo,Io,Ro,Po,To={exports:{}};function Ao(){if(Bn)return qn;Bn=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return qn={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:e,MAX_SAFE_COMPONENT_LENGTH:16}}function ko(){if(Wn)return Hn;Wn=1;const e="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return Hn=e}function xo(){return Xn||(Xn=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=Ao(),n=ko(),s=(t=e.exports={}).re=[],o=t.src=[],i=t.t={};let a=0;const c=(e,t,r)=>{const c=a++;n(c,t),i[e]=c,o[c]=t,s[c]=new RegExp(t,r?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${o[i.NUMERICIDENTIFIER]}|${o[i.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${o[i.NUMERICIDENTIFIERLOOSE]}|${o[i.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${o[i.PRERELEASEIDENTIFIER]}(?:\\.${o[i.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${o[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[i.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${o[i.BUILDIDENTIFIER]}(?:\\.${o[i.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${o[i.MAINVERSION]}${o[i.PRERELEASE]}?${o[i.BUILD]}?`),c("FULL",`^${o[i.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${o[i.MAINVERSIONLOOSE]}${o[i.PRERELEASELOOSE]}?${o[i.BUILD]}?`),c("LOOSE",`^${o[i.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${o[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${o[i.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:${o[i.PRERELEASE]})?${o[i.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:${o[i.PRERELEASELOOSE]})?${o[i.BUILD]}?)?)?`),c("XRANGE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",o[i.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${o[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${o[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${o[i.LONECARET]}${o[i.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${o[i.LONECARET]}${o[i.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${o[i.GTLT]}\\s*(${o[i.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]}|${o[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${o[i.XRANGEPLAIN]})\\s+-\\s+(${o[i.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${o[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[i.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}(To,To.exports)),To.exports}function Co(){if(Yn)return Kn;Yn=1;const e=["includePrerelease","loose","rtl"];return Kn=t=>t?"object"!=typeof t?{loose:!0}:e.filter((e=>t[e])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}}function Lo(){if(Zn)return Jn;Zn=1;const e=/^[0-9]+$/,t=(t,r)=>{const n=e.test(t),s=e.test(r);return n&&s&&(t=+t,r=+r),t===r?0:n&&!s?-1:s&&!n?1:t<r?-1:1};return Jn={compareIdentifiers:t,rcompareIdentifiers:(e,r)=>t(r,e)}}function jo(){if(es)return Qn;es=1;const e=ko(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=Ao(),{re:n,t:s}=xo(),o=Co(),{compareIdentifiers:i}=Lo();class a{constructor(i,c){if(c=o(c),i instanceof a){if(i.loose===!!c.loose&&i.includePrerelease===!!c.includePrerelease)return i;i=i.version}else if("string"!=typeof i)throw new TypeError(`Invalid Version: ${i}`);if(i.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",i,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const l=i.trim().match(c.loose?n[s.LOOSE]:n[s.FULL]);if(!l)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof a)){if("string"==typeof t&&t===this.version)return 0;t=new a(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof a||(e=new a(e,this.options)),i(this.major,e.major)||i(this.minor,e.minor)||i(this.patch,e.patch)}comparePre(t){if(t instanceof a||(t=new a(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(e("prerelease compare",r,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return i(n,s)}while(++r)}compareBuild(t){t instanceof a||(t=new a(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(e("prerelease compare",r,n,s),void 0===n&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===n)return-1;if(n!==s)return i(n,s)}while(++r)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}return Qn=a}function Do(){if(rs)return ts;rs=1;const{MAX_LENGTH:e}=Ao(),{re:t,t:r}=xo(),n=jo(),s=Co();return ts=(o,i)=>{if(i=s(i),o instanceof n)return o;if("string"!=typeof o)return null;if(o.length>e)return null;if(!(i.loose?t[r.LOOSE]:t[r.FULL]).test(o))return null;try{return new n(o,i)}catch(e){return null}}}function Mo(){if(ss)return ns;ss=1;const e=Do();return ns=(t,r)=>{const n=e(t,r);return n?n.version:null}}function Fo(){if(is)return os;is=1;const e=Do();return os=(t,r)=>{const n=e(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null}}function Uo(){if(cs)return as;cs=1;const e=jo();return as=(t,r,n,s)=>{"string"==typeof n&&(s=n,n=void 0);try{return new e(t,n).inc(r,s).version}catch(e){return null}}}function Vo(){if(us)return ls;us=1;const e=jo();return ls=(t,r,n)=>new e(t,n).compare(new e(r,n))}function Go(){if(hs)return fs;hs=1;const e=Vo();return fs=(t,r,n)=>0===e(t,r,n)}function zo(){if(ps)return ds;ps=1;const e=Do(),t=Go();return ds=(r,n)=>{if(t(r,n))return null;{const t=e(r),s=e(n),o=t.prerelease.length||s.prerelease.length,i=o?"pre":"",a=o?"prerelease":"";for(const e in t)if(("major"===e||"minor"===e||"patch"===e)&&t[e]!==s[e])return i+e;return a}}}function qo(){if(ys)return ms;ys=1;const e=jo();return ms=(t,r)=>new e(t,r).major}function Bo(){if(gs)return vs;gs=1;const e=jo();return vs=(t,r)=>new e(t,r).minor}function Ho(){if(_s)return Es;_s=1;const e=jo();return Es=(t,r)=>new e(t,r).patch}function Wo(){if($s)return ws;$s=1;const e=Do();return ws=(t,r)=>{const n=e(t,r);return n&&n.prerelease.length?n.prerelease:null}}function Xo(){if(Ss)return bs;Ss=1;const e=Vo();return bs=(t,r,n)=>e(r,t,n)}function Ko(){if(Os)return Ns;Os=1;const e=Vo();return Ns=(t,r)=>e(t,r,!0)}function Yo(){if(Rs)return Is;Rs=1;const e=jo();return Is=(t,r,n)=>{const s=new e(t,n),o=new e(r,n);return s.compare(o)||s.compareBuild(o)}}function Jo(){if(Ts)return Ps;Ts=1;const e=Yo();return Ps=(t,r)=>t.sort(((t,n)=>e(t,n,r)))}function Zo(){if(ks)return As;ks=1;const e=Yo();return As=(t,r)=>t.sort(((t,n)=>e(n,t,r)))}function Qo(){if(Cs)return xs;Cs=1;const e=Vo();return xs=(t,r,n)=>e(t,r,n)>0}function ei(){if(js)return Ls;js=1;const e=Vo();return Ls=(t,r,n)=>e(t,r,n)<0}function ti(){if(Ms)return Ds;Ms=1;const e=Vo();return Ds=(t,r,n)=>0!==e(t,r,n)}function ri(){if(Us)return Fs;Us=1;const e=Vo();return Fs=(t,r,n)=>e(t,r,n)>=0}function ni(){if(Gs)return Vs;Gs=1;const e=Vo();return Vs=(t,r,n)=>e(t,r,n)<=0}function si(){if(qs)return zs;qs=1;const e=Go(),t=ti(),r=Qo(),n=ri(),s=ei(),o=ni();return zs=(i,a,c,l)=>{switch(a){case"===":return"object"==typeof i&&(i=i.version),"object"==typeof c&&(c=c.version),i===c;case"!==":return"object"==typeof i&&(i=i.version),"object"==typeof c&&(c=c.version),i!==c;case"":case"=":case"==":return e(i,c,l);case"!=":return t(i,c,l);case">":return r(i,c,l);case">=":return n(i,c,l);case"<":return s(i,c,l);case"<=":return o(i,c,l);default:throw new TypeError(`Invalid operator: ${a}`)}}}function oi(){if(Hs)return Bs;Hs=1;const e=jo(),t=Do(),{re:r,t:n}=xo();return Bs=(s,o)=>{if(s instanceof e)return s;if("number"==typeof s&&(s=String(s)),"string"!=typeof s)return null;let i=null;if((o=o||{}).rtl){let e;for(;(e=r[n.COERCERTL].exec(s))&&(!i||i.index+i[0].length!==s.length);)i&&e.index+e[0].length===i.index+i[0].length||(i=e),r[n.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;r[n.COERCERTL].lastIndex=-1}else i=s.match(r[n.COERCE]);return null===i?null:t(`${i[2]}.${i[3]||"0"}.${i[4]||"0"}`,o)}}function ii(){if(Ys)return Ks;function e(t){var r=this;if(r instanceof e||(r=new e),r.tail=null,r.head=null,r.length=0,t&&"function"==typeof t.forEach)t.forEach((function(e){r.push(e)}));else if(arguments.length>0)for(var n=0,s=arguments.length;n<s;n++)r.push(arguments[n]);return r}function t(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function r(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function n(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}Ys=1,Ks=e,e.Node=s,e.create=e,e.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},e.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},e.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},e.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},e.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},e.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},e.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},e.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},e.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},e.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},e.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},e.prototype.map=function(t,r){r=r||this;for(var n=new e,s=this.head;null!==s;)n.push(t.call(r,s.value,this)),s=s.next;return n},e.prototype.mapReverse=function(t,r){r=r||this;for(var n=new e,s=this.tail;null!==s;)n.push(t.call(r,s.value,this)),s=s.prev;return n},e.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var s=0;null!==n;s++)r=e(r,n.value,s),n=n.next;return r},e.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var s=this.length-1;null!==n;s--)r=e(r,n.value,s),n=n.prev;return r},e.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},e.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},e.prototype.slice=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var n=new e;if(r<t||r<0)return n;t<0&&(t=0),r>this.length&&(r=this.length);for(var s=0,o=this.head;null!==o&&s<t;s++)o=o.next;for(;null!==o&&s<r;s++,o=o.next)n.push(o.value);return n},e.prototype.sliceReverse=function(t,r){(r=r||this.length)<0&&(r+=this.length),(t=t||0)<0&&(t+=this.length);var n=new e;if(r<t||r<0)return n;t<0&&(t=0),r>this.length&&(r=this.length);for(var s=this.length,o=this.tail;null!==o&&s>r;s--)o=o.prev;for(;null!==o&&s>t;s--,o=o.prev)n.push(o.value);return n},e.prototype.splice=function(e,r,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var s=0,o=this.head;null!==o&&s<e;s++)o=o.next;var i=[];for(s=0;o&&s<r;s++)i.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(s=0;s<n.length;s++)o=t(this,o,n[s]);return i},e.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{(Xs?Ws:(Xs=1,Ws=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}))(e)}catch(e){}return Ks}function ai(){if(eo)return Qs;eo=1;class e{constructor(t,s){if(s=r(s),t instanceof e)return t.loose===!!s.loose&&t.includePrerelease===!!s.includePrerelease?t:new e(t.raw,s);if(t instanceof n)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!f(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&h(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,o=t.get(r);if(o)return o;const h=this.options.loose,d=h?i[a.HYPHENRANGELOOSE]:i[a.HYPHENRANGE];e=e.replace(d,S(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(i[a.COMPARATORTRIM],c),s("comparator trim",e,i[a.COMPARATORTRIM]),e=(e=(e=e.replace(i[a.TILDETRIM],l)).replace(i[a.CARETTRIM],u)).split(/\s+/).join(" ");const m=h?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],y=e.split(" ").map((e=>p(e,this.options))).join(" ").split(/\s+/).map((e=>b(e,this.options))).filter(this.options.loose?e=>!!e.match(m):()=>!0).map((e=>new n(e,this.options)));y.length;const v=new Map;for(const e of y){if(f(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const g=[...v.values()];return t.set(r,g),g}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>d(e,r)&&t.set.some((t=>d(t,r)&&e.every((e=>t.every((t=>e.intersects(t,r)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1}}Qs=e;const t=new(function(){if(Zs)return Js;Zs=1;const e=ii(),t=Symbol("max"),r=Symbol("length"),n=Symbol("lengthCalculator"),s=Symbol("allowStale"),o=Symbol("maxAge"),i=Symbol("dispose"),a=Symbol("noDisposeOnSet"),c=Symbol("lruList"),l=Symbol("cache"),u=Symbol("updateAgeOnGet"),f=()=>1,h=(e,t,r)=>{const n=e[l].get(t);if(n){const t=n.value;if(d(e,t)){if(m(e,n),!e[s])return}else r&&(e[u]&&(n.value.now=Date.now()),e[c].unshiftNode(n));return t.value}},d=(e,t)=>{if(!t||!t.maxAge&&!e[o])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[o]&&r>e[o]},p=e=>{if(e[r]>e[t])for(let n=e[c].tail;e[r]>e[t]&&null!==n;){const t=n.prev;m(e,n),n=t}},m=(e,t)=>{if(t){const n=t.value;e[i]&&e[i](n.key,n.value),e[r]-=n.length,e[l].delete(n.key),e[c].removeNode(t)}};class y{constructor(e,t,r,n,s){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=s||0}}const v=(e,t,r,n)=>{let o=r.value;d(e,o)&&(m(e,r),e[s]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};return Js=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[t]=e.max||1/0;const r=e.length||f;if(this[n]="function"!=typeof r?f:r,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[o]=e.maxAge||0,this[i]=e.dispose,this[a]=e.noDisposeOnSet||!1,this[u]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[t]=e||1/0,p(this)}get max(){return this[t]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[o]=e,p(this)}get maxAge(){return this[o]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[n]&&(this[n]=e,this[r]=0,this[c].forEach((e=>{e.length=this[n](e.value,e.key),this[r]+=e.length}))),p(this)}get lengthCalculator(){return this[n]}get length(){return this[r]}get itemCount(){return this[c].length}rforEach(e,t){t=t||this;for(let r=this[c].tail;null!==r;){const n=r.prev;v(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[c].head;null!==r;){const n=r.next;v(this,e,r,t),r=n}}keys(){return this[c].toArray().map((e=>e.key))}values(){return this[c].toArray().map((e=>e.value))}reset(){this[i]&&this[c]&&this[c].length&&this[c].forEach((e=>this[i](e.key,e.value))),this[l]=new Map,this[c]=new e,this[r]=0}dump(){return this[c].map((e=>!d(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[c]}set(e,s,u){if((u=u||this[o])&&"number"!=typeof u)throw new TypeError("maxAge must be a number");const f=u?Date.now():0,h=this[n](s,e);if(this[l].has(e)){if(h>this[t])return m(this,this[l].get(e)),!1;const n=this[l].get(e).value;return this[i]&&(this[a]||this[i](e,n.value)),n.now=f,n.maxAge=u,n.value=s,this[r]+=h-n.length,n.length=h,this.get(e),p(this),!0}const d=new y(e,s,h,f,u);return d.length>this[t]?(this[i]&&this[i](e,s),!1):(this[r]+=d.length,this[c].unshift(d),this[l].set(e,this[c].head),p(this),!0)}has(e){if(!this[l].has(e))return!1;const t=this[l].get(e).value;return!d(this,t)}get(e){return h(this,e,!0)}peek(e){return h(this,e,!1)}pop(){const e=this[c].tail;return e?(m(this,e),e.value):null}del(e){m(this,this[l].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],s=n.e||0;if(0===s)this.set(n.k,n.v);else{const e=s-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[l].forEach(((e,t)=>h(this,t,!1)))}}}())({max:1e3}),r=Co(),n=ci(),s=ko(),o=jo(),{re:i,t:a,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:u}=xo(),f=e=>"<0.0.0-0"===e.value,h=e=>""===e.value,d=(e,t)=>{let r=!0;const n=e.slice();let s=n.pop();for(;r&&n.length;)r=n.every((e=>s.intersects(e,t))),s=n.pop();return r},p=(e,t)=>(s("comp",e,t),e=g(e,t),s("caret",e),e=y(e,t),s("tildes",e),e=_(e,t),s("xrange",e),e=$(e,t),s("stars",e),e),m=e=>!e||"x"===e.toLowerCase()||"*"===e,y=(e,t)=>e.trim().split(/\s+/).map((e=>v(e,t))).join(" "),v=(e,t)=>{const r=t.loose?i[a.TILDELOOSE]:i[a.TILDE];return e.replace(r,((t,r,n,o,i)=>{let a;return s("tilde",e,t,r,n,o,i),m(r)?a="":m(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:m(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,s("tilde return",a),a}))},g=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{s("caret",e,t);const r=t.loose?i[a.CARETLOOSE]:i[a.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,i,a)=>{let c;return s("caret",e,t,r,o,i,a),m(r)?c="":m(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:m(i)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),c="0"===r?"0"===o?`>=${r}.${o}.${i}-${a} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${a} <${+r+1}.0.0-0`):(s("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),s("caret return",c),c}))},_=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>w(e,t))).join(" ")),w=(e,t)=>{e=e.trim();const r=t.loose?i[a.XRANGELOOSE]:i[a.XRANGE];return e.replace(r,((r,n,o,i,a,c)=>{s("xRange",e,r,n,o,i,a,c);const l=m(o),u=l||m(i),f=u||m(a),h=f;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(i=0),a=0,">"===n?(n=">=",u?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),"<"===n&&(c="-0"),r=`${n+o}.${i}.${a}${c}`):u?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(r=`>=${o}.${i}.0${c} <${o}.${+i+1}.0-0`),s("xRange return",r),r}))},$=(e,t)=>(s("replaceStars",e,t),e.trim().replace(i[a.STAR],"")),b=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(i[t.includePrerelease?a.GTE0PRE:a.GTE0],"")),S=e=>(t,r,n,s,o,i,a,c,l,u,f,h,d)=>`${r=m(n)?"":m(s)?`>=${n}.0.0${e?"-0":""}`:m(o)?`>=${n}.${s}.0${e?"-0":""}`:i?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=m(l)?"":m(u)?`<${+l+1}.0.0-0`:m(f)?`<${l}.${+u+1}.0-0`:h?`<=${l}.${u}.${f}-${h}`:e?`<${l}.${u}.${+f+1}-0`:`<=${c}`}`.trim(),N=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==n.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return Qs}function ci(){if(ro)return to;ro=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,s){if(s=r(s),n instanceof t){if(n.loose===!!s.loose)return n;n=n.value}i("comparator",n,s),this.options=s,this.loose=!!s.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(t){const r=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],o=t.match(r);if(!o)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new a(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(i("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(e){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),""===this.operator)return""===this.value||new c(e.value,r).test(this.value);if(""===e.operator)return""===e.value||new c(this.value,r).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),l=o(this.semver,"<",e.semver,r)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=o(this.semver,">",e.semver,r)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||s||i&&a||l||u}}to=t;const r=Co(),{re:n,t:s}=xo(),o=si(),i=ko(),a=jo(),c=ai();return to}function li(){if(so)return no;so=1;const e=ai();return no=(t,r,n)=>{try{r=new e(r,n)}catch(e){return!1}return r.test(t)},no}function ui(){if(io)return oo;io=1;const e=ai();return oo=(t,r)=>new e(t,r).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" "))),oo}function fi(){if(co)return ao;co=1;const e=jo(),t=ai();return ao=(r,n,s)=>{let o=null,i=null,a=null;try{a=new t(n,s)}catch(e){return null}return r.forEach((t=>{a.test(t)&&(o&&-1!==i.compare(t)||(o=t,i=new e(o,s)))})),o},ao}function hi(){if(uo)return lo;uo=1;const e=jo(),t=ai();return lo=(r,n,s)=>{let o=null,i=null,a=null;try{a=new t(n,s)}catch(e){return null}return r.forEach((t=>{a.test(t)&&(o&&1!==i.compare(t)||(o=t,i=new e(o,s)))})),o},lo}function di(){if(ho)return fo;ho=1;const e=jo(),t=ai(),r=Qo();return fo=(n,s)=>{n=new t(n,s);let o=new e("0.0.0");if(n.test(o))return o;if(o=new e("0.0.0-0"),n.test(o))return o;o=null;for(let t=0;t<n.set.length;++t){const s=n.set[t];let i=null;s.forEach((t=>{const n=new e(t.semver.version);switch(t.operator){case">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case"":case">=":i&&!r(n,i)||(i=n);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}})),!i||o&&!r(o,i)||(o=i)}return o&&n.test(o)?o:null},fo}function pi(){if(mo)return po;mo=1;const e=ai();return po=(t,r)=>{try{return new e(t,r).range||"*"}catch(e){return null}},po}function mi(){if(vo)return yo;vo=1;const e=jo(),t=ci(),{ANY:r}=t,n=ai(),s=li(),o=Qo(),i=ei(),a=ni(),c=ri();return yo=(l,u,f,h)=>{let d,p,m,y,v;switch(l=new e(l,h),u=new n(u,h),f){case">":d=o,p=a,m=i,y=">",v=">=";break;case"<":d=i,p=c,m=o,y="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(l,u,h))return!1;for(let e=0;e<u.set.length;++e){const n=u.set[e];let s=null,o=null;if(n.forEach((e=>{e.semver===r&&(e=new t(">=0.0.0")),s=s||e,o=o||e,d(e.semver,s.semver,h)?s=e:m(e.semver,o.semver,h)&&(o=e)})),s.operator===y||s.operator===v)return!1;if((!o.operator||o.operator===y)&&p(l,o.semver))return!1;if(o.operator===v&&m(l,o.semver))return!1}return!0},yo}function yi(){if(Eo)return go;Eo=1;const e=mi();return go=(t,r,n)=>e(t,r,">",n),go}function vi(){if(wo)return _o;wo=1;const e=mi();return _o=(t,r,n)=>e(t,r,"<",n),_o}function gi(){if(bo)return $o;bo=1;const e=ai();return $o=(t,r,n)=>(t=new e(t,n),r=new e(r,n),t.intersects(r))}function Ei(){if(No)return So;No=1;const e=li(),t=Vo();return So=(r,n,s)=>{const o=[];let i=null,a=null;const c=r.sort(((e,r)=>t(e,r,s)));for(const t of c){e(t,n,s)?(a=t,i||(i=t)):(a&&o.push([i,a]),a=null,i=null)}i&&o.push([i,null]);const l=[];for(const[e,t]of o)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const u=l.join(" || "),f="string"==typeof n.raw?n.raw:String(n);return u.length<f.length?u:n},So}function _i(){if(Io)return Oo;Io=1;const e=ai(),t=ci(),{ANY:r}=t,n=li(),s=Vo(),o=(e,o,c)=>{if(e===o)return!0;if(1===e.length&&e[0].semver===r){if(1===o.length&&o[0].semver===r)return!0;e=c.includePrerelease?[new t(">=0.0.0-0")]:[new t(">=0.0.0")]}if(1===o.length&&o[0].semver===r){if(c.includePrerelease)return!0;o=[new t(">=0.0.0")]}const l=new Set;let u,f,h,d,p,m,y;for(const t of e)">"===t.operator||">="===t.operator?u=i(u,t,c):"<"===t.operator||"<="===t.operator?f=a(f,t,c):l.add(t.semver);if(l.size>1)return null;if(u&&f){if(h=s(u.semver,f.semver,c),h>0)return null;if(0===h&&(">="!==u.operator||"<="!==f.operator))return null}for(const e of l){if(u&&!n(e,String(u),c))return null;if(f&&!n(e,String(f),c))return null;for(const t of o)if(!n(e,String(t),c))return!1;return!0}let v=!(!f||c.includePrerelease||!f.semver.prerelease.length)&&f.semver,g=!(!u||c.includePrerelease||!u.semver.prerelease.length)&&u.semver;v&&1===v.prerelease.length&&"<"===f.operator&&0===v.prerelease[0]&&(v=!1);for(const e of o){if(y=y||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,u)if(g&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch&&(g=!1),">"===e.operator||">="===e.operator){if(d=i(u,e,c),d===e&&d!==u)return!1}else if(">="===u.operator&&!n(u.semver,String(e),c))return!1;if(f)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if(p=a(f,e,c),p===e&&p!==f)return!1}else if("<="===f.operator&&!n(f.semver,String(e),c))return!1;if(!e.operator&&(f||u)&&0!==h)return!1}return!(u&&m&&!f&&0!==h)&&(!(f&&y&&!u&&0!==h)&&(!g&&!v))},i=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},a=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};return Oo=(t,r,n={})=>{if(t===r)return!0;t=new e(t,n),r=new e(r,n);let s=!1;e:for(const e of t.set){for(const t of r.set){const r=o(e,t,n);if(s=s||null!==r,r)continue e}if(s)return!1}return!0}}function wi(){if(Po)return Ro;Po=1;const e=xo();return Ro={re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:Ao().SEMVER_SPEC_VERSION,SemVer:jo(),compareIdentifiers:Lo().compareIdentifiers,rcompareIdentifiers:Lo().rcompareIdentifiers,parse:Do(),valid:Mo(),clean:Fo(),inc:Uo(),diff:zo(),major:qo(),minor:Bo(),patch:Ho(),prerelease:Wo(),compare:Vo(),rcompare:Xo(),compareLoose:Ko(),compareBuild:Yo(),sort:Jo(),rsort:Zo(),gt:Qo(),lt:ei(),eq:Go(),neq:ti(),gte:ri(),lte:ni(),cmp:si(),coerce:oi(),Comparator:ci(),Range:ai(),satisfies:li(),toComparators:ui(),maxSatisfying:fi(),minSatisfying:hi(),minVersion:di(),validRange:pi(),outside:mi(),gtr:yi(),ltr:vi(),intersects:gi(),simplifyRange:Ei(),subset:_i()}}var $i,bi,Si,Ni={exports:{}},Oi={exports:{}};function Ii(){if($i)return Oi.exports;$i=1;const e=(e,t)=>{for(const r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};return Oi.exports=e,Oi.exports.default=e,Oi.exports}function Ri(){if(bi)return Ni.exports;bi=1;const e=Ii(),t=new WeakMap,r=(r,n={})=>{if("function"!=typeof r)throw new TypeError("Expected a function");let s,o=0;const i=r.displayName||r.name||"<anonymous>",a=function(...e){if(t.set(a,++o),1===o)s=r.apply(this,e),r=null;else if(!0===n.throw)throw new Error(`Function \`${i}\` can only be called once`);return s};return e(a,r),t.set(a,o),a};return Ni.exports=r,Ni.exports.default=r,Ni.exports.callCount=e=>{if(!t.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return t.get(e)},Ni.exports}function Pi(){return Si||(Si=1,function(e,t){var r,n,s,o,i,a,c=x&&x.__classPrivateFieldSet||function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},l=x&&x.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const u=E.default,f=_.default,h=w.default,d=$.default,p=b.default,m=j(),y=G(),v=le(),g=he(),S=je(),N=(Pn||(Pn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const t=qt();e.KeywordCxt=t.default;var r=tt();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=er(),s=Rn(),o=Tn,i=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),s.default.forEach((e=>this.addVocabulary(e)))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(e,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.default=c}(Me)),Me),O=Vn(),I=zn(),R=wi(),P=Ri(),T="aes-256-cbc",A=()=>Object.create(null);delete require.cache[__filename];const k=f.dirname(null!==(n=null===(r=e.parent)||void 0===r?void 0:r.filename)&&void 0!==n?n:"."),C="__internal__",L="__internal__.migrations.version";class D{constructor(e={}){var t;s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,{}),this._deserialize=e=>JSON.parse(e),this._serialize=e=>JSON.stringify(e,null,"\t");const r={configName:"config",fileExtension:"json",projectSuffix:"nodejs",clearInvalidConfig:!1,accessPropertiesByDotNotation:!0,...e},n=P((()=>{const e=v.sync({cwd:k}),t=e&&JSON.parse(u.readFileSync(e,"utf8"));return null!=t?t:{}}));if(!r.cwd){if(r.projectName||(r.projectName=n().name),!r.projectName)throw new Error("Project name could not be inferred. Please specify the `projectName` option.");r.cwd=g(r.projectName,{suffix:r.projectSuffix}).config}if(c(this,i,r),r.schema){if("object"!=typeof r.schema)throw new TypeError("The `schema` option must be an object.");const e=new N.default({allErrors:!0,useDefaults:!0});O.default(e);const t={type:"object",properties:r.schema};c(this,s,e.compile(t));for(const[e,t]of Object.entries(r.schema))(null==t?void 0:t.default)&&(l(this,a)[e]=t.default)}r.defaults&&c(this,a,{...l(this,a),...r.defaults}),r.serialize&&(this._serialize=r.serialize),r.deserialize&&(this._deserialize=r.deserialize),this.events=new p.EventEmitter,c(this,o,r.encryptionKey);const h=r.fileExtension?`.${r.fileExtension}`:"";this.path=f.resolve(r.cwd,`${null!==(t=r.configName)&&void 0!==t?t:"config"}${h}`);const m=this.store,y=Object.assign(A(),r.defaults,m);this._validate(y);try{d.deepEqual(m,y)}catch(e){this.store=y}if(r.watch&&this._watch(),r.migrations){if(r.projectVersion||(r.projectVersion=n().version),!r.projectVersion)throw new Error("Project version could not be inferred. Please specify the `projectVersion` option.");this._migrate(r.migrations,r.projectVersion)}}get(e,t){return l(this,i).accessPropertiesByDotNotation?this._get(e,t):e in this.store?this.store[e]:t}set(e,t){if("string"!=typeof e&&"object"!=typeof e)throw new TypeError("Expected `key` to be of type `string` or `object`, got "+typeof e);if("object"!=typeof e&&void 0===t)throw new TypeError("Use `delete()` to clear values");if(this._containsReservedKey(e))throw new TypeError("Please don't use the __internal__ key, as it's used to manage this module internal operations.");const{store:r}=this,n=(e,t)=>{((e,t)=>{const r=typeof t;if(new Set(["undefined","symbol","function"]).has(r))throw new TypeError(`Setting a value of type \`${r}\` for key \`${e}\` is not allowed as it's not supported by JSON`)})(e,t),l(this,i).accessPropertiesByDotNotation?m.set(r,e,t):r[e]=t};if("object"==typeof e){const t=e;for(const[e,r]of Object.entries(t))n(e,r)}else n(e,t);this.store=r}has(e){return l(this,i).accessPropertiesByDotNotation?m.has(this.store,e):e in this.store}reset(...e){for(const t of e)null!=l(this,a)[t]&&this.set(t,l(this,a)[t])}delete(e){const{store:t}=this;l(this,i).accessPropertiesByDotNotation?m.delete(t,e):delete t[e],this.store=t}clear(){this.store=A();for(const e of Object.keys(l(this,a)))this.reset(e)}onDidChange(e,t){if("string"!=typeof e)throw new TypeError("Expected `key` to be of type `string`, got "+typeof e);if("function"!=typeof t)throw new TypeError("Expected `callback` to be of type `function`, got "+typeof t);return this._handleChange((()=>this.get(e)),t)}onDidAnyChange(e){if("function"!=typeof e)throw new TypeError("Expected `callback` to be of type `function`, got "+typeof e);return this._handleChange((()=>this.store),e)}get size(){return Object.keys(this.store).length}get store(){try{const e=u.readFileSync(this.path,l(this,o)?null:"utf8"),t=this._encryptData(e),r=this._deserialize(t);return this._validate(r),Object.assign(A(),r)}catch(e){if("ENOENT"===e.code)return this._ensureDirectory(),A();if(l(this,i).clearInvalidConfig&&"SyntaxError"===e.name)return A();throw e}}set store(e){this._ensureDirectory(),this._validate(e),this._write(e),this.events.emit("change")}*[(s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,Symbol.iterator)](){for(const[e,t]of Object.entries(this.store))yield[e,t]}_encryptData(e){if(!l(this,o))return e.toString();try{if(l(this,o))try{if(":"===e.slice(16,17).toString()){const t=e.slice(0,16),r=h.pbkdf2Sync(l(this,o),t.toString(),1e4,32,"sha512"),n=h.createDecipheriv(T,r,t);e=Buffer.concat([n.update(Buffer.from(e.slice(17))),n.final()]).toString("utf8")}else{const t=h.createDecipher(T,l(this,o));e=Buffer.concat([t.update(Buffer.from(e)),t.final()]).toString("utf8")}}catch(e){}}catch(e){}return e.toString()}_handleChange(e,t){let r=e();const n=()=>{const n=r,s=e();try{d.deepEqual(s,n)}catch(e){r=s,t.call(this,s,n)}};return this.events.on("change",n),()=>this.events.removeListener("change",n)}_validate(e){if(!l(this,s))return;if(l(this,s).call(this,e)||!l(this,s).errors)return;const t=l(this,s).errors.map((({dataPath:e,message:t=""})=>`\`${e.slice(1)}\` ${t}`));throw new Error("Config schema violation: "+t.join("; "))}_ensureDirectory(){y.sync(f.dirname(this.path))}_write(e){let t=this._serialize(e);if(l(this,o)){const e=h.randomBytes(16),r=h.pbkdf2Sync(l(this,o),e.toString(),1e4,32,"sha512"),n=h.createCipheriv(T,r,e);t=Buffer.concat([e,Buffer.from(":"),n.update(Buffer.from(t)),n.final()])}if(process.env.SNAP)u.writeFileSync(this.path,t);else try{S.writeFileSync(this.path,t)}catch(e){if("EXDEV"===e.code)return void u.writeFileSync(this.path,t);throw e}}_watch(){this._ensureDirectory(),u.existsSync(this.path)||this._write(A()),u.watch(this.path,{persistent:!1},I((()=>{this.events.emit("change")}),{wait:100}))}_migrate(e,t){let r=this._get(L,"0.0.0");const n=Object.keys(e).filter((e=>this._shouldPerformMigration(e,r,t)));let s={...this.store};for(const t of n)try{(0,e[t])(this),this._set(L,t),r=t,s={...this.store}}catch(e){throw this.store=s,new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${e}`)}!this._isVersionInRangeFormat(r)&&R.eq(r,t)||this._set(L,t)}_containsReservedKey(e){if("object"==typeof e){if(Object.keys(e)[0]===C)return!0}return"string"==typeof e&&(!!l(this,i).accessPropertiesByDotNotation&&!!e.startsWith("__internal__."))}_isVersionInRangeFormat(e){return null===R.clean(e)}_shouldPerformMigration(e,t,r){return this._isVersionInRangeFormat(e)?("0.0.0"===t||!R.satisfies(t,e))&&R.satisfies(r,e):!R.lte(e,t)&&!R.gt(e,r)}_get(e,t){return m.get(this.store,e,t)}_set(e,t){const{store:r}=this;m.set(r,e,t),this.store=r}}t.default=D,e.exports=D,e.exports.default=D}(C,C.exports)),C.exports}var Ti,Ai,ki,xi,Ci,Li,ji,Di={exports:{}};function Mi(){return Ai?Ti:(Ai=1,Ti={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}})}function Fi(){if(ki)return Di.exports;ki=1;const{EMPTY_BUFFER:e}=Mi();function t(t,r){if(0===t.length)return e;if(1===t.length)return t[0];const n=Buffer.allocUnsafe(r);let s=0;for(let e=0;e<t.length;e++){const r=t[e];n.set(r,s),s+=r.length}return s<r?n.slice(0,s):n}function r(e,t,r,n,s){for(let o=0;o<s;o++)r[n+o]=e[o]^t[3&o]}function n(e,t){const r=e.length;for(let n=0;n<r;n++)e[n]^=t[3&n]}function s(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function o(e){if(o.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),o.readOnly=!1),t}try{const e=require("bufferutil"),i=e.BufferUtil||e;Di.exports={concat:t,mask(e,t,n,s,o){o<48?r(e,t,n,s,o):i.mask(e,t,n,s,o)},toArrayBuffer:s,toBuffer:o,unmask(e,t){e.length<32?n(e,t):i.unmask(e,t)}}}catch(e){Di.exports={concat:t,mask:r,toArrayBuffer:s,toBuffer:o,unmask:n}}return Di.exports}function Ui(){if(ji)return Li;ji=1;const e=A.default,t=Fi(),r=function(){if(Ci)return xi;Ci=1;const e=Symbol("kDone"),t=Symbol("kRun");return xi=class{constructor(r){this[e]=()=>{this.pending--,this[t]()},this.concurrency=r||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[t]()}[t](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[e])}}}}(),{kStatusCode:n,NOOP:s}=Mi(),o=Buffer.from([0,0,255,255]),i=Symbol("permessage-deflate"),a=Symbol("total-length"),c=Symbol("callback"),l=Symbol("buffers"),u=Symbol("error");let f;function h(e){this[l].push(e),this[a]+=e.length}function d(e){this[a]+=e.length,this[i]._maxPayload<1||this[a]<=this[i]._maxPayload?this[l].push(e):(this[u]=new RangeError("Max payload size exceeded"),this[u][n]=1009,this.removeListener("data",d),this.reset())}function p(e){this[i]._inflate=null,e[n]=1007,this[c](e)}return Li=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new r(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[c];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){f.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){f.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(r,n,s){const f=this._isServer?"client":"server";if(!this._inflate){const t=`${f}_max_window_bits`,r="number"!=typeof this.params[t]?e.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:r}),this._inflate[i]=this,this._inflate[a]=0,this._inflate[l]=[],this._inflate.on("error",p),this._inflate.on("data",d)}this._inflate[c]=s,this._inflate.write(r),n&&this._inflate.write(o),this._inflate.flush((()=>{const e=this._inflate[u];if(e)return this._inflate.close(),this._inflate=null,void s(e);const r=t.concat(this._inflate[l],this._inflate[a]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[a]=0,this._inflate[l]=[],n&&this.params[`${f}_no_context_takeover`]&&this._inflate.reset()),s(null,r)}))}_compress(r,n,o){const i=this._isServer?"server":"client";if(!this._deflate){const t=`${i}_max_window_bits`,r="number"!=typeof this.params[t]?e.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:r}),this._deflate[a]=0,this._deflate[l]=[],this._deflate.on("error",s),this._deflate.on("data",h)}this._deflate[c]=o,this._deflate.write(r),this._deflate.flush(e.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=t.concat(this._deflate[l],this._deflate[a]);n&&(e=e.slice(0,e.length-4)),this._deflate[c]=null,this._deflate[a]=0,this._deflate[l]=[],n&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),o(null,e)}))}},Li}var Vi,Gi,zi,qi,Bi,Hi,Wi,Xi,Ki,Yi,Ji,Zi,Qi,ea,ta,ra,na,sa={exports:{}};function oa(){if(Vi)return sa.exports;function e(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function t(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}Vi=1;try{let r=require("utf-8-validate");"object"==typeof r&&(r=r.Validation.isValidUTF8),sa.exports={isValidStatusCode:e,isValidUTF8:e=>e.length<150?t(e):r(e)}}catch(r){sa.exports={isValidStatusCode:e,isValidUTF8:t}}return sa.exports}function ia(){if(zi)return Gi;zi=1;const{Writable:e}=k.default,t=Ui(),{BINARY_TYPES:r,EMPTY_BUFFER:n,kStatusCode:s,kWebSocket:o}=Mi(),{concat:i,toArrayBuffer:a,unmask:c}=Fi(),{isValidStatusCode:l,isValidUTF8:u}=oa();function f(e,t,r,n){const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,f),o[s]=n,o}return Gi=class extends e{constructor(e,t,n,s){super(),this._binaryType=e||r[0],this[o]=void 0,this._extensions=t||{},this._isServer=!!n,this._maxPayload=0|s,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const r=64==(64&e[0]);if(r&&!this._extensions[t.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(r)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(r)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=n;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&c(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,r){this._extensions[t.extensionName].decompress(e,this._fin,((e,t)=>{if(e)return r(e);if(t.length){if(this._messageLength+=t.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(t)}const n=this.dataMessage();if(n)return r(n);this.startLoop(r)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?i(t,e):"arraybuffer"===this._binaryType?a(i(t,e)):t,this.emit("message",r)}else{const r=i(t,e);if(!u(r))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",r.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!l(t))return f(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!u(r))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}},Gi}function aa(){if(Bi)return qi;Bi=1;const{randomFillSync:e}=w.default,t=Ui(),{EMPTY_BUFFER:r}=Mi(),{isValidStatusCode:n}=oa(),{mask:s,toBuffer:o}=Fi(),i=Buffer.alloc(4);class a{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,r){const n=r.mask&&r.readOnly;let o=r.mask?6:2,a=t.length;t.length>=65536?(o+=8,a=127):t.length>125&&(o+=2,a=126);const c=Buffer.allocUnsafe(n?t.length+o:o);return c[0]=r.fin?128|r.opcode:r.opcode,r.rsv1&&(c[0]|=64),c[1]=a,126===a?c.writeUInt16BE(t.length,2):127===a&&(c.writeUInt32BE(0,2),c.writeUInt32BE(t.length,6)),r.mask?(e(i,0,4),c[1]|=128,c[o-4]=i[0],c[o-3]=i[1],c[o-2]=i[2],c[o-1]=i[3],n?(s(t,i,c,o,t.length),[c]):(s(t,i,t,0,t.length),[c,t])):[c,t]}close(e,t,s,o){let i;if(void 0===e)i=r;else{if("number"!=typeof e||!n(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+r),i.writeUInt16BE(e,0),i.write(t,2)}}this._deflating?this.enqueue([this.doClose,i,s,o]):this.doClose(i,s,o)}doClose(e,t,r){this.sendFrame(a.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const n=o(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,o.readOnly,r]):this.doPing(n,t,o.readOnly,r)}doPing(e,t,r,n){this.sendFrame(a.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){const n=o(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,o.readOnly,r]):this.doPong(n,t,o.readOnly,r)}doPong(e,t,r,n){this.sendFrame(a.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,r,n){const s=o(e),i=this._extensions[t.extensionName];let c=r.binary?2:1,l=r.compress;if(this._firstFragment?(this._firstFragment=!1,l&&i&&(l=s.length>=i._threshold),this._compress=l):(l=!1,c=0),r.fin&&(this._firstFragment=!0),i){const e={fin:r.fin,rsv1:l,opcode:c,mask:r.mask,readOnly:o.readOnly};this._deflating?this.enqueue([this.dispatch,s,this._compress,e,n]):this.dispatch(s,this._compress,e,n)}else this.sendFrame(a.frame(s,{fin:r.fin,rsv1:!1,opcode:c,mask:r.mask,readOnly:o.readOnly}),n)}dispatch(e,r,n,s){if(!r)return void this.sendFrame(a.frame(e,n),s);const o=this._extensions[t.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,o.compress(e,n.fin,((t,r)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof s&&s(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(a.frame(r,n),s),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}return qi=a}function ca(){if(Ki)return Xi;Ki=1;const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function t(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}return Xi={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(r){const n=Object.create(null);if(void 0===r||""===r)return n;let s,o,i=Object.create(null),a=!1,c=!1,l=!1,u=-1,f=-1,h=0;for(;h<r.length;h++){const d=r.charCodeAt(h);if(void 0===s)if(-1===f&&1===e[d])-1===u&&(u=h);else if(32===d||9===d)-1===f&&-1!==u&&(f=h);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===f&&(f=h);const e=r.slice(u,f);44===d?(t(n,e,i),i=Object.create(null)):s=e,u=f=-1}}else if(void 0===o)if(-1===f&&1===e[d])-1===u&&(u=h);else if(32===d||9===d)-1===f&&-1!==u&&(f=h);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===f&&(f=h),t(i,r.slice(u,f),!0),44===d&&(t(n,s,i),i=Object.create(null),s=void 0),u=f=-1}else{if(61!==d||-1===u||-1!==f)throw new SyntaxError(`Unexpected character at index ${h}`);o=r.slice(u,h),u=f=-1}else if(c){if(1!==e[d])throw new SyntaxError(`Unexpected character at index ${h}`);-1===u?u=h:a||(a=!0),c=!1}else if(l)if(1===e[d])-1===u&&(u=h);else if(34===d&&-1!==u)l=!1,f=h;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${h}`);c=!0}else if(34===d&&61===r.charCodeAt(h-1))l=!0;else if(-1===f&&1===e[d])-1===u&&(u=h);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===f&&(f=h);let e=r.slice(u,f);a&&(e=e.replace(/\\/g,""),a=!1),t(i,o,e),44===d&&(t(n,s,i),i=Object.create(null),s=void 0),o=void 0,u=f=-1}}else-1===f&&(f=h)}if(-1===u||l)throw new SyntaxError("Unexpected end of input");-1===f&&(f=h);const d=r.slice(u,f);return void 0===s?t(n,d,i):(void 0===o?t(i,d,!0):t(i,o,a?d.replace(/\\/g,""):d),t(n,s,i)),n}},Xi}function la(){if(Ji)return Yi;Ji=1;const e=b.default,t=O.default,r=I.default,n=R.default,s=P.default,{randomBytes:o,createHash:i}=w.default,{URL:a}=T.default,c=Ui(),l=ia(),u=aa(),{BINARY_TYPES:f,EMPTY_BUFFER:h,GUID:d,kStatusCode:p,kWebSocket:m,NOOP:y}=Mi(),{addEventListener:v,removeEventListener:g}=function(){if(Wi)return Hi;Wi=1;class e{constructor(e,t){this.target=t,this.type=e}}class t extends e{constructor(e,t){super("message",t),this.data=e}}class r extends e{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class n extends e{constructor(e){super("open",e)}}class s extends e{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const o={addEventListener(e,o,i){if("function"!=typeof o)return;function a(e){o.call(this,new t(e,this))}function c(e,t){o.call(this,new r(e,t,this))}function l(e){o.call(this,new s(e,this))}function u(){o.call(this,new n(this))}const f=i&&i.once?"once":"on";"message"===e?(a._listener=o,this[f](e,a)):"close"===e?(c._listener=o,this[f](e,c)):"error"===e?(l._listener=o,this[f](e,l)):"open"===e?(u._listener=o,this[f](e,u)):this[f](e,o)},removeEventListener(e,t){const r=this.listeners(e);for(let n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};return Hi=o}(),{format:E,parse:_}=ca(),{toBuffer:$}=Fi(),S=["CONNECTING","OPEN","CLOSING","CLOSED"],N=[8,13];class A extends e{constructor(e,t,r){super(),this._binaryType=f[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=A.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),k(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){f.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new l(this.binaryType,this._extensions,this._isServer,r);this._sender=new u(e,this._extensions),this._receiver=n,this._socket=e,n[m]=this,e[m]=this,n.on("conclude",D),n.on("drain",M),n.on("error",F),n.on("message",V),n.on("ping",G),n.on("pong",z),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",q),e.on("data",B),e.on("end",H),e.on("error",W),this._readyState=A.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=A.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[c.extensionName]&&this._extensions[c.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=A.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return L(this,this._req,e)}this.readyState!==A.CLOSING?(this._readyState=A.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||h,t,r)):j(this,e,r)}pong(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||h,t,r)):j(this,e,r)}send(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==A.OPEN)return void j(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[c.extensionName]||(n.compress=!1),this._sender.send(e||h,n,r)}terminate(){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return L(this,this._req,e)}this._socket&&(this._readyState=A.CLOSING,this._socket.destroy())}}}function k(e,n,s,l){const u={protocolVersion:N[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...l,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!N.includes(u.protocolVersion))throw new RangeError(`Unsupported protocol version: ${u.protocolVersion} (supported versions: ${N.join(", ")})`);let f;n instanceof a?(f=n,e._url=n.href):(f=new a(n),e._url=n);const h="ws+unix:"===f.protocol;if(!(f.host||h&&f.pathname))throw new Error(`Invalid URL: ${e.url}`);const p="wss:"===f.protocol||"https:"===f.protocol,m=p?443:80,y=o(16).toString("base64"),v=p?t.get:r.get;let g;if(u.createConnection=p?C:x,u.defaultPort=u.defaultPort||m,u.port=f.port||m,u.host=f.hostname.startsWith("[")?f.hostname.slice(1,-1):f.hostname,u.headers={"Sec-WebSocket-Version":u.protocolVersion,"Sec-WebSocket-Key":y,Connection:"Upgrade",Upgrade:"websocket",...u.headers},u.path=f.pathname+f.search,u.timeout=u.handshakeTimeout,u.perMessageDeflate&&(g=new c(!0!==u.perMessageDeflate?u.perMessageDeflate:{},!1,u.maxPayload),u.headers["Sec-WebSocket-Extensions"]=E({[c.extensionName]:g.offer()})),s&&(u.headers["Sec-WebSocket-Protocol"]=s),u.origin&&(u.protocolVersion<13?u.headers["Sec-WebSocket-Origin"]=u.origin:u.headers.Origin=u.origin),(f.username||f.password)&&(u.auth=`${f.username}:${f.password}`),h){const e=u.path.split(":");u.socketPath=e[0],u.path=e[1]}let w=e._req=v(u);u.timeout&&w.on("timeout",(()=>{L(e,w,"Opening handshake has timed out")})),w.on("error",(t=>{null===w||w.aborted||(w=e._req=null,e._readyState=A.CLOSING,e.emit("error",t),e.emitClose())})),w.on("response",(t=>{const r=t.headers.location,o=t.statusCode;if(r&&u.followRedirects&&o>=300&&o<400){if(++e._redirects>u.maxRedirects)return void L(e,w,"Maximum redirects exceeded");w.abort();const t=new a(r,n);k(e,t,s,l)}else e.emit("unexpected-response",w,t)||L(e,w,`Unexpected server response: ${t.statusCode}`)})),w.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==A.CONNECTING)return;w=e._req=null;const o=i("sha1").update(y+d).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void L(e,r,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"],l=(s||"").split(/, */);let f;if(!s&&a?f="Server sent a subprotocol but none was requested":s&&!a?f="Server sent no subprotocol":a&&!l.includes(a)&&(f="Server sent an invalid subprotocol"),f)L(e,r,f);else{if(a&&(e._protocol=a),g)try{const r=_(t.headers["sec-websocket-extensions"]);r[c.extensionName]&&(g.accept(r[c.extensionName]),e._extensions[c.extensionName]=g)}catch(t){return void L(e,r,"Invalid Sec-WebSocket-Extensions header")}e.setSocket(r,n,u.maxPayload)}}))}function x(e){return e.path=e.socketPath,n.connect(e)}function C(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=n.isIP(e.host)?"":e.host),s.connect(e)}function L(e,t,r){e._readyState=A.CLOSING;const n=new Error(r);Error.captureStackTrace(n,L),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function j(e,t,r){if(t){const r=$(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){r(new Error(`WebSocket is not open: readyState ${e.readyState} (${S[e.readyState]})`))}}function D(e,t){const r=this[m];r._socket.removeListener("data",B),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function M(){this[m]._socket.resume()}function F(e){const t=this[m];t._socket.removeListener("data",B),t._readyState=A.CLOSING,t._closeCode=e[p],t.emit("error",e),t._socket.destroy()}function U(){this[m].emitClose()}function V(e){this[m].emit("message",e)}function G(e){const t=this[m];t.pong(e,!t._isServer,y),t.emit("ping",e)}function z(e){this[m].emit("pong",e)}function q(){const e=this[m];this.removeListener("close",q),this.removeListener("end",H),e._readyState=A.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",B),this[m]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",U),e._receiver.on("finish",U))}function B(e){this[m]._receiver.write(e)||this.pause()}function H(){const e=this[m];e._readyState=A.CLOSING,e._receiver.end(),this.end()}function W(){const e=this[m];this.removeListener("error",W),this.on("error",y),e&&(e._readyState=A.CLOSING,this.destroy())}return S.forEach(((e,t)=>{const r={enumerable:!0,value:t};Object.defineProperty(A.prototype,e,r),Object.defineProperty(A,e,r)})),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(A.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(A.prototype,`on${e}`,{configurable:!0,enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++)r[t]._listener&&this.removeListener(e,r[t]);this.addEventListener(e,t)}})})),A.prototype.addEventListener=v,A.prototype.removeEventListener=g,Yi=A}function ua(){if(ta)return ea;ta=1;const e=b.default,{createHash:t}=w.default,{createServer:r,STATUS_CODES:n}=I.default,s=Ui(),o=la(),{format:i,parse:a}=ca(),{GUID:c,kWebSocket:l}=Mi(),u=/^[+/0-9A-Za-z]{22}==$/;function f(e){e.emit("close")}function h(){this.destroy()}function d(e,t,r,s){e.writable&&(r=r||n[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.write(`HTTP/1.1 ${t} ${n[t]}\r\n`+Object.keys(s).map((e=>`${e}: ${s[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",h),e.destroy()}function p(e){return e.trim()}return ea=class extends e{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=r(((e,t)=>{const r=n[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close((()=>this.emit("close"))):process.nextTick(f,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",h);const o=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),i=+e.headers["sec-websocket-version"],c={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!o||!u.test(o)||8!==i&&13!==i||!this.shouldHandle(e))return d(t,400);if(this.options.perMessageDeflate){const r=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=a(e.headers["sec-websocket-extensions"]);t[s.extensionName]&&(r.accept(t[s.extensionName]),c[s.extensionName]=r)}catch(e){return d(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[""+(8===i?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,((s,i,a,l)=>{if(!s)return d(t,i||401,a,l);this.completeUpgrade(o,c,e,t,r,n)}));if(!this.options.verifyClient(s))return d(t,401)}this.completeUpgrade(o,c,e,t,r,n)}completeUpgrade(e,r,n,a,u,f){if(!a.readable||!a.writable)return a.destroy();if(a[l])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${t("sha1").update(e+c).digest("base64")}`],m=new o(null);let y=n.headers["sec-websocket-protocol"];if(y&&(y=y.split(",").map(p),y=this.options.handleProtocols?this.options.handleProtocols(y,n):y[0],y&&(d.push(`Sec-WebSocket-Protocol: ${y}`),m._protocol=y)),r[s.extensionName]){const e=r[s.extensionName].params,t=i({[s.extensionName]:[e]});d.push(`Sec-WebSocket-Extensions: ${t}`),m._extensions=r}this.emit("headers",d,n),a.write(d.concat("\r\n").join("\r\n")),a.removeListener("error",h),m.setSocket(a,u,this.options.maxPayload),this.clients&&(this.clients.add(m),m.on("close",(()=>this.clients.delete(m)))),f(m,n)}},ea}function fa(){if(na)return ra;na=1;const e=la();return e.createWebSocketStream=function(){if(Qi)return Zi;Qi=1;const{Duplex:e}=k.default;function t(e){e.emit("close")}function r(){!this.destroyed&&this._writableState.finished&&this.destroy()}function n(e){this.removeListener("error",n),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}return Zi=function(s,o){let i=!0;function a(){i&&s._socket.resume()}s.readyState===s.CONNECTING?s.once("open",(function(){s._receiver.removeAllListeners("drain"),s._receiver.on("drain",a)})):(s._receiver.removeAllListeners("drain"),s._receiver.on("drain",a));const c=new e({...o,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return s.on("message",(function(e){c.push(e)||(i=!1,s._socket.pause())})),s.once("error",(function(e){c.destroyed||c.destroy(e)})),s.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(e,r){if(s.readyState===s.CLOSED)return r(e),void process.nextTick(t,c);let n=!1;s.once("error",(function(e){n=!0,r(e)})),s.once("close",(function(){n||r(e),process.nextTick(t,c)})),s.terminate()},c._final=function(e){s.readyState!==s.CONNECTING?null!==s._socket&&(s._socket._writableState.finished?(e(),c._readableState.endEmitted&&c.destroy()):(s._socket.once("finish",(function(){e()})),s.close())):s.once("open",(function(){c._final(e)}))},c._read=function(){s.readyState!==s.OPEN||i||(i=!0,s._receiver._writableState.needDrain||s._socket.resume())},c._write=function(e,t,r){s.readyState!==s.CONNECTING?s.send(e,r):s.once("open",(function(){c._write(e,t,r)}))},c.on("end",r),c.on("error",n),c},Zi}(),e.Server=ua(),e.Receiver=ia(),e.Sender=aa(),ra=e}var ha={getUserId:getUserId,getStore:()=>{try{const e=Pi(),t={encryptionKey:"s0meR1nd0mK3y",configName:"nucleus"};try{const{remote:e,app:r}=require("electron"),n=(e?e.app:r).getPath("userData");t.cwd=n}catch(e){}return new e(t)}catch(e){return"undefined"!=typeof localStorage?{get:e=>JSON.parse(localStorage.getItem(e)),set:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))}}:(console.warn("Nucleus: could not find a way to store cache. Offline events and persistance won't work!"),{get:()=>{},set:()=>{}})}},debounce:(e,t)=>{let r;return function(...n){clearTimeout(r),r=setTimeout((()=>{clearTimeout(r),e(...n)}),t)}},compareVersions:compareVersions,getWsClient:()=>"undefined"!=typeof WebSocket?WebSocket:fa()};const da=ha.getWsClient(),pa=ha.getStore();let ma="wss://app.nucleus.sh",ya=!0,va=!1,ga=!1,Ea=20,_a=null,wa=!1,$a={},ba=pa.get("nucleus-queue")||[],Sa=pa.get("nucleus-props")||{};const Na=pa.get("nucleus-cache")||{},Oa={init:function(e,t={}){autoDetectData().then((r=>{if($a=r,$a.appId=e,ya=!t.disableInDev,va=!!t.debug,ga=!!t.disableTracking,t.autoUserId&&($a.userId=ha.generateUserId()),t.endpoint&&(ma=t.endpoint),t.reportInterval&&(Ea=t.reportInterval),$a.sessionId=Math.floor(1e6*Math.random())+1,$a.appId&&(!ha.isDevMode()||ya)){if(setInterval(Ra,1e3*Ea),t.disableErrorReports||"undefined"==typeof process||(process.on("uncaughtException",(e=>{this.trackError("uncaughtException",e)})),process.on("unhandledRejection",(e=>{this.trackError("unhandledRejection",e)}))),"undefined"==typeof window)return;t.disableErrorReports||(window.onerror=(e,t,r,n,s)=>{this.trackError("windowError",s)}),window.addEventListener("online",Ra)}}))},appStarted:function(){wa=!0,this.track(null,null,"init"),Ra()},track:ha.debounce(((e,t,r="event")=>{if(!$a.appId)return Aa("Missing APP ID before we can start tracking.");if(!e&&!r)return;if(ga||ha.isDevMode()&&!ya)return;Ta("adding to queue: "+(e||r));const n=Math.floor(1e6*Math.random())+1;"init"===r&&Sa&&(t=Sa);const s={type:r,name:e,date:new Date,appId:$a.appId,id:n,userId:$a.userId,machineId:$a.machineId,sessionId:$a.sessionId,payload:t};if(r&&["init","error"].includes(r)){const e={client:"js",platform:$a.platform,osVersion:$a.osVersion,totalRam:$a.totalRam,version:$a.version,locale:$a.locale,arch:$a.arch,moduleVersion:$a.moduleVersion};Object.keys(e).forEach((t=>{s[t]=e[t]}))}ba.push(s)}),100),trackError:function(e,t){const r={stack:t.stack||t,message:t.message||t};this.track(e,r,"error"),"function"==typeof this.onError&&this.onError(e,t)},getCustomData:e=>e(null,Na.customData),setUserId:function(e){if(!e||""===e.trim())return!1;Ta("user id set to "+e),$a.userId=e,wa&&this.track(null,null,"userid")},setProps:function(e,t){for(const t in e)$a[t]&&($a[t]=e[t],e[t]=null);Sa=t?e:Object.assign(Sa,e),ha.debounce((()=>pa.set("nucleus-props",Sa)),1e3),wa&&this.track(null,Sa,"props")},identify:function(e,t){this.setUserId(e),this.setProps(t,!0)},screen:function(e,t){if(!e||""===e.trim())return!1;Ta("viewing screen "+e),this.track(e,t,"nucleus:view")},disableTracking:()=>{ga=!0,Ta("tracking disabled")},enableTracking:()=>{ga=!1,Ta("tracking enabled")}},Ia=()=>{if(!_a||_a.readyState!==da.OPEN)return void pa.set("nucleus-queue",ba);if(!ba.length){const e={type:"heartbeat",machineId:$a.machineId};return _a.send(JSON.stringify({data:[e]}))}const e={data:ba};Ta("sending cached events ("+ba.length+")"),_a.send(JSON.stringify(e))},Ra=()=>{pa.set("nucleus-queue",ba),(ba.length||wa)&&(ga||(_a&&_a.readyState===da.OPEN||(Ta("No connection to server. Opening it."),_a=new da(`${ma}/app/${$a.appId}/track`),_a.onerror=e=>{Aa(`ws ${e.code}: ${e.reason}`)},_a.onclose=e=>{Aa(`ws ${e.code}: ${e.reason}`)},_a.onmessage=Pa,_a.onopen=Ia),ba.length&&Ia()))},Pa=e=>{let t={};Ta("server said "+e.data);try{t=JSON.parse(e.data)}catch(e){return void Aa("Could not parse message from server.")}t.customData&&(Na.customData=t.customData,ha.debounce((()=>pa.set("nucleus-cache",Na)),1e3)),t.latestVersion&&(latestVersion=t.latestVersion,Oa.checkUpdates()),(t.reportedIds||t.confirmation)&&(Ta("Server successfully registered our data."),t.reportedIds?ba=ba.filter((e=>!t.reportedIds.includes(e.id))):t.confirmation&&(ba=[]),ha.debounce((()=>pa.set("nucleus-queue",ba)),1e3))},Ta=e=>{va&&console.log("Nucleus:",e)},Aa=e=>{va&&console.warn("Nucleus Error:",e)};return Oa}));
